<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="baidu-site-verification" content="codeva-OBV0UPgBod" />
    <meta name="msvalidate.01" content="B9019CE3751A15D63E78AF8679980069" />
    <meta name="description" content="ch2 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›æ„é€ å‡½æ•°çš„åç§°å¿…é¡»å’Œç±»åä¸€è‡´ï¼Œä¸§å¤±äº†çµæ´»æ€§ã€‚å¦‚æœæœ‰æ„é€ æ–¹æ³•é‡è½½ï¼Œåˆå­˜åœ¨å¤šä¸ªæ„é€ å‚æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªé—®é¢˜æ›´æ˜æ˜¾ã€‚ &#x2F;&#x2F; å­˜åœ¨å¤šä¸ªæ„é€ å‚æ•°ï¼Œä¸æ˜“è¯» Date date0 &#x3D; new Date(); Date date1 &#x3D; new Date(0L); Date date2 &#x3D; new Date(&quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="effective java">
<meta property="og:url" content="https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/index.html">
<meta property="og:site_name" content="Lozhu&#39;s blog">
<meta property="og:description" content="ch2 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›æ„é€ å‡½æ•°çš„åç§°å¿…é¡»å’Œç±»åä¸€è‡´ï¼Œä¸§å¤±äº†çµæ´»æ€§ã€‚å¦‚æœæœ‰æ„é€ æ–¹æ³•é‡è½½ï¼Œåˆå­˜åœ¨å¤šä¸ªæ„é€ å‚æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªé—®é¢˜æ›´æ˜æ˜¾ã€‚ &#x2F;&#x2F; å­˜åœ¨å¤šä¸ªæ„é€ å‚æ•°ï¼Œä¸æ˜“è¯» Date date0 &#x3D; new Date(); Date date1 &#x3D; new Date(0L); Date date2 &#x3D; new Date(&quot;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-07-26T14:56:29.000Z">
<meta property="article:modified_time" content="2024-12-08T06:50:57.171Z">
<meta property="article:author" content="lozhu">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="effective java">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>effective java</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XMGS491MQF"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XMGS491MQF');
  </script>


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Lozhu's blog" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="modal" class="modal">
  <span id="modal_close_btn" class="modal-close-btn">x</span>
  <img id="modal_image" class="modal-image">
  <!-- <div id="caption"></div> -->
</div>

      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="é¡¶éƒ¨" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/about/">å…³äº</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html">å¼€å¾€ ğŸš‡</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="ä¸Šä¸€ç¯‡" href="/2022/08/14/e3805f6785ac/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="ä¸‹ä¸€ç¯‡" href="/2022/04/01/3762ce77035a/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="è¿”å›é¡¶éƒ¨" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="åˆ†äº«æ–‡ç« " href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&text=effective java"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&is_video=false&description=effective java"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=effective java&body=Check out this article: https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-reddit " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-digg " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&name=effective java&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&t=effective java"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li> -->
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ch2-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.</span> <span class="toc-text">ch2 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%83%E8%99%91%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E4%BB%A3%E6%9B%BF%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E7%9B%B8%E6%AF%94%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E5%90%8D%E7%A7%B0%EF%BC%9B"><span class="toc-number">1.1.1.</span> <span class="toc-text">1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E6%8E%A7%E5%88%B6%E5%8D%95%E4%BE%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">2ã€é™æ€å·¥å‚æ–¹æ³•å¯ä»¥æ§åˆ¶å•ä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%8F%AF%E4%BB%A5%E8%BF%94%E5%9B%9E%E5%8E%9F%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AD%90%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.3.</span> <span class="toc-text">3ã€å¯ä»¥è¿”å›åŸè¿”å›ç±»å‹çš„å­ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%87%E5%88%B0%E5%A4%9A%E4%B8%AA%E6%9E%84%E9%80%A0%E5%99%A8%E5%8F%82%E6%95%B0%E6%97%B6%E8%A6%81%E8%80%83%E8%99%91%E7%94%A8%E6%9E%84%E5%BB%BA%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è¦è€ƒè™‘ç”¨æ„å»ºå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E7%A7%81%E6%9C%89%E6%9E%84%E9%80%A0%E5%99%A8%E5%92%8C%E6%9E%9A%E4%B8%BE%E5%BC%BA%E5%8C%96-Singleton-%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">ç”¨ç§æœ‰æ„é€ å™¨å’Œæšä¸¾å¼ºåŒ– Singleton ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%A7%81%E6%9C%89%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%BC%BA%E5%8C%96%E4%B8%8D%E5%8F%AF%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%9A%84%E8%83%BD%E5%8A%9B"><span class="toc-number">1.4.</span> <span class="toc-text">é€šè¿‡ç§æœ‰æ„é€ æ–¹æ³•å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E5%88%9B%E9%80%A0%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.5.</span> <span class="toc-text">é¿å…åˆ›é€ ä¸å¿…è¦çš„å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.5.1.</span> <span class="toc-text">1ã€å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E4%BC%98%E4%BA%8E%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">1.5.2.</span> <span class="toc-text">2ã€é™æ€å·¥å‚æ–¹æ³•ä¼˜äºæ„é€ å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7"><span class="toc-number">1.5.3.</span> <span class="toc-text">3ã€é™æ€å±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8C%85%E8%A3%85%E7%B1%BB"><span class="toc-number">1.5.4.</span> <span class="toc-text">4ã€åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E9%99%A4%E8%BF%87%E6%9C%9F%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8"><span class="toc-number">1.6.</span> <span class="toc-text">æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%B8%80%E4%B8%AA%E7%B1%BB%E8%87%AA%E5%B7%B1%E7%AE%A1%E7%90%86%E5%86%85%E5%AD%98%E5%AE%B9%E6%98%93%E5%AF%BC%E8%87%B4%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F"><span class="toc-number">1.6.1.</span> <span class="toc-text">1ã€ä¸€ä¸ªç±»è‡ªå·±ç®¡ç†å†…å­˜å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E7%BC%93%E5%AD%98%E5%AE%B9%E6%98%93%E5%AF%BC%E8%87%B4%E5%86%85%E7%B2%97%E6%B3%84%E6%BC%8F"><span class="toc-number">1.6.2.</span> <span class="toc-text">2ã€ç¼“å­˜å®¹æ˜“å¯¼è‡´å†…ç²—æ³„æ¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ch3-%E5%AF%B9%E4%BA%8E%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E9%80%9A%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">ch3 å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%86%E7%9B%96-equals-%E7%9A%84%E6%97%B6%E5%80%99%E8%AF%B7%E9%81%B5%E5%AE%88%E9%80%9A%E7%94%A8%E7%BA%A6%E5%AE%9A"><span class="toc-number">2.1.</span> <span class="toc-text">è¦†ç›– equals çš„æ—¶å€™è¯·éµå®ˆé€šç”¨çº¦å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E9%9C%80%E8%A6%81%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-number">2.1.1.</span> <span class="toc-text">ä¸éœ€è¦è¦†ç›– equals æ–¹æ³•çš„åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95"><span class="toc-number">2.1.2.</span> <span class="toc-text">å¦‚ä½•è¦†ç›– equals æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%8A%E8%AF%AB"><span class="toc-number">2.1.3.</span> <span class="toc-text">è¦†ç›– equals æ–¹æ³•çš„ä¸€äº›å‘Šè¯«</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95%E6%97%B6%E6%80%BB%E6%98%AF%E8%A6%81%E8%A6%86%E7%9B%96-hashCode"><span class="toc-number">2.2.</span> <span class="toc-text">è¦†ç›– equals æ–¹æ³•æ—¶æ€»æ˜¯è¦è¦†ç›– hashCode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A7%8B%E7%BB%88%E8%A6%81%E8%A6%86%E7%9B%96-toString"><span class="toc-number">2.3.</span> <span class="toc-text">å§‹ç»ˆè¦è¦†ç›– toString</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%A8%E6%85%8E%E7%9A%84%E8%A6%86%E7%9B%96-clone"><span class="toc-number">2.4.</span> <span class="toc-text">è°¨æ…çš„è¦†ç›– clone</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%83%E8%99%91%E5%AE%9E%E7%8E%B0-Comparable-%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.5.</span> <span class="toc-text">è€ƒè™‘å®ç° Comparable æ¥å£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ch4-%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.</span> <span class="toc-text">ch4 ç±»å’Œæ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%B1%BB%E5%92%8C%E6%88%90%E5%91%98%E7%9A%84%E5%8F%AF%E8%AE%BF%E9%97%AE%E6%80%A7%E6%9C%80%E5%B0%8F%E5%8C%96"><span class="toc-number">3.1.</span> <span class="toc-text">ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%85%AC%E6%9C%89%E7%B1%BB%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%AC%E6%9C%89%E6%96%B9%E6%B3%95%E8%80%8C%E9%9D%9E%E5%85%AC%E6%9C%89%E5%9F%9F"><span class="toc-number">3.2.</span> <span class="toc-text">åœ¨å…¬æœ‰ç±»ä¸­ä½¿ç”¨å…¬æœ‰æ–¹æ³•è€Œéå…¬æœ‰åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E5%8F%AF%E5%8F%98%E5%BD%A2%E6%9C%80%E5%B0%8F"><span class="toc-number">3.3.</span> <span class="toc-text">ä½¿å¯å˜å½¢æœ€å°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E4%BC%98%E4%BA%8E%E7%BB%A7%E6%89%BF"><span class="toc-number">3.4.</span> <span class="toc-text">å¤åˆä¼˜äºç»§æ‰¿</span></a></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        effective java
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">lozhu</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2022-07-26T14:56:29.000Z" class="dt-published" itemprop="datePublished">2022-07-26</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a>
    </div>


      
    <!-- <div class="article-tag"> -->
    <div class="article-category">
        <i class="fa-solid fa-tag"></i>
        <!-- <a class="p-category" href="/tags/Java/" rel="tag">Java</a>, <a class="p-category" href="/tags/effective-java/" rel="tag">effective java</a> -->
        <a class="category-link" href="/tags/Java/" rel="tag">Java</a>, <a class="category-link" href="/tags/effective-java/" rel="tag">effective java</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h2 id="ch2-åˆ›å»ºå’Œé”€æ¯å¯¹è±¡"><a href="#ch2-åˆ›å»ºå’Œé”€æ¯å¯¹è±¡" class="headerlink" title="ch2 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡"></a>ch2 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡</h2><h3 id="è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨"><a href="#è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨" class="headerlink" title="è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨"></a>è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨</h3><h4 id="1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›"><a href="#1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›" class="headerlink" title="1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›"></a>1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›</h4><p>æ„é€ å‡½æ•°çš„åç§°å¿…é¡»å’Œç±»åä¸€è‡´ï¼Œä¸§å¤±äº†çµæ´»æ€§ã€‚å¦‚æœæœ‰æ„é€ æ–¹æ³•é‡è½½ï¼Œåˆå­˜åœ¨å¤šä¸ªæ„é€ å‚æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªé—®é¢˜æ›´æ˜æ˜¾ã€‚</p>
<pre><code class="java">// å­˜åœ¨å¤šä¸ªæ„é€ å‚æ•°ï¼Œä¸æ˜“è¯»
Date date0 = new Date();
Date date1 = new Date(0L);
Date date2 = new Date(&quot;0&quot;);
Date date3 = new Date(1, 2, 1);
Date date4 = new Date(1, 2, 1, 1, 1);
Date date5 = new Date(1, 2, 1, 1, 1, 1);
</code></pre>
<p>ä»£ç å¼•ç”¨ï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ceb5ec8f1174">å…³äº Java çš„é™æ€å·¥å‚æ–¹æ³•ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼</a></p>
<h4 id="2ã€é™æ€å·¥å‚æ–¹æ³•å¯ä»¥æ§åˆ¶å•ä¾‹"><a href="#2ã€é™æ€å·¥å‚æ–¹æ³•å¯ä»¥æ§åˆ¶å•ä¾‹" class="headerlink" title="2ã€é™æ€å·¥å‚æ–¹æ³•å¯ä»¥æ§åˆ¶å•ä¾‹"></a>2ã€é™æ€å·¥å‚æ–¹æ³•å¯ä»¥æ§åˆ¶å•ä¾‹</h4><p>å¦‚æœåªéœ€è¦å¯¹å¤–æä¾›ä¸€ä¸ªå®ä¾‹ï¼Œæ— éœ€å…³å¿ƒæ˜¯å¦æ˜¯æ–°å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨é™æ€å·¥å‚æ§åˆ¶å•ä¾‹ã€‚</p>
<pre><code class="java">public class SingletonItem &#123;

    private int value;

    private static SingletonItem singletonItem = null;

    private SingletonItem() &#123;
        this.value = new Random().nextInt(100);
    &#125;

    public static SingletonItem getInstance() &#123;
        if (singletonItem != null) &#123;
            return singletonItem;
        &#125;
        singletonItem = new SingletonItem();
        return singletonItem;
    &#125;

    public int getValue() &#123;
        return value;
    &#125;

    public void setValue(int value) &#123;
        this.value = value;
    &#125;
&#125;
</code></pre>
<h4 id="3ã€å¯ä»¥è¿”å›åŸè¿”å›ç±»å‹çš„å­ç±»å‹"><a href="#3ã€å¯ä»¥è¿”å›åŸè¿”å›ç±»å‹çš„å­ç±»å‹" class="headerlink" title="3ã€å¯ä»¥è¿”å›åŸè¿”å›ç±»å‹çš„å­ç±»å‹"></a>3ã€å¯ä»¥è¿”å›åŸè¿”å›ç±»å‹çš„å­ç±»å‹</h4><p>æ„é€ æ–¹æ³•åªèƒ½è¿”å›ç¡®å®šçš„ç±»å‹ï¼Œé™æ€å·¥å‚æ–¹æ³•å¯ä»¥æ›´åŠ çµæ´»çš„è¿”å›å…¶å­ç±»å‹ã€‚</p>
<pre><code class="java">// ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•è¿”å›å­ç±»å‹
public static Item newSubItem(float square) &#123;
  SubItem subItem = new SubItem(square);
  subItem.setName(&quot;test&quot;);
  subItem.setWidth(0);
  subItem.setLength(0);
  return new SubItem(square);
&#125;
</code></pre>
<h3 id="é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è¦è€ƒè™‘ç”¨æ„å»ºå™¨"><a href="#é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è¦è€ƒè™‘ç”¨æ„å»ºå™¨" class="headerlink" title="é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è¦è€ƒè™‘ç”¨æ„å»ºå™¨"></a>é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è¦è€ƒè™‘ç”¨æ„å»ºå™¨</h3><p>é™æ€å·¥å‚æ–¹æ³•å’Œæ„é€ æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šä¸èƒ½å¾ˆå¥½çš„æ‰©å±•åˆ°å¤§é‡å¯é€‰å‚æ•°ã€‚æœ‰æ—¶å€™å¯èƒ½ä¸€ä¸ªç±»æ¶‰åŠåˆ°çš„å¯é€‰æ„é€ å‚æ•°æ¯”è¾ƒå¤šï¼Œé’ˆå¯¹æ¯ç§æƒ…å†µç¼–å†™ä¸€ä¸ªæ„é€ å™¨ï¼Œå·¥ä½œé‡éå¸¸å¤§è€Œä¸”ä»£ç å¾ˆéš¾æ§åˆ¶ï¼Œè°ƒç”¨ä¹Ÿéœ€è¦ä¼ è®¸å¤šåŸæœ¬ä¸éœ€è¦çš„å¯é€‰å­—æ®µã€‚è¿™æ—¶å€™ä½¿ç”¨æ„å»ºå™¨å°±èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ„é€ å™¨æ˜¯é€šè¿‡æ–¹æ³•å®ç°çš„ï¼Œå› æ­¤è¿˜å¯ä»¥å¯¹ä¼ å…¥çš„æ„é€ å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ä¸æ»¡è¶³çº¦æŸæ¡ä»¶ï¼Œå¯ä»¥æŠ›å‡º IllegalState Exception å¼‚å¸¸ï¼Œæ˜¾ç¤ºè¯¥å‚æ•°è¿åäº†å“ªä¸ªçº¦æŸæ¡ä»¶ã€‚</p>
<p>åœ¨å†…éƒ¨ç±» Builder ä¸­åŒºåˆ†å¿…é¡»å­—æ®µï¼ˆfinalï¼‰å’Œå¯é€‰å­—æ®µï¼Œå¹¶å¯¹å…¶è¿›è¡Œèµ‹å€¼ï¼Œæœ€ååœ¨ build æ–¹æ³•ä¸­è¿”å›éœ€è¦çš„å¯¹è±¡ã€‚</p>
<pre><code class="java">public class Product &#123;

    private final String name;

    private final String desc;

    private final float price1;

    private final float price2;

    public static class Builder &#123;

        // å¿…é¡»å­—æ®µ
        private final String name;

        // å¯é€‰å­—æ®µ
        private String desc;

        private float price1;

        private float price2;

        public Builder(String name) &#123;
            if (name == null || name.length() &lt; 5 || name.length() &gt; 8) &#123;
                throw new IllegalArgumentException(&quot;äº§å“åç§°åªèƒ½ç”± 5 è‡³ 8 ä¸ªå­—ç¬¦ç»„æˆ&quot;);
            &#125;
            this.name = name;
        &#125;

        public Builder desc(String desc) &#123;
            this.desc = desc;
            return this;
        &#125;

        public Builder price1(float price) &#123;
            this.price1 = price;
            return this;
        &#125;

        public Builder price2(float price) &#123;
            this.price2 = price;
            return this;
        &#125;

        public Product build() &#123;
            return new Product(this);
        &#125;
    &#125;

    public Product(Builder builder) &#123;
        if ((builder.price1 + builder.price2) &lt; 5) &#123;
            throw new IllegalStateException(&quot;ä»·æ ¼ 1 ä¸ä»·æ ¼ 2 æ€»å’Œä¸èƒ½å°äº 5&quot;);
        &#125;
        this.name = builder.name;
        this.desc = builder.desc;
        this.price1 = builder.price1;
        this.price2 = builder.price2;
    &#125;
&#125;

Product product = new Product.Builder(&quot;product1&quot;)
                .desc(&quot;desc1&quot;)
                .price1(1.01F)
                .price2(2.01F)
                .build();
</code></pre>
<p>ä½¿ç”¨æ„å»ºå™¨éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<ul>
<li>ä¸ºäº†åˆ›å»ºå¯¹è±¡å¿…é¡»å…ˆåˆ›å»ºä»–çš„æ„å»ºå™¨ï¼Œåœ¨æŸäº›æ³¨é‡æ€§èƒ½çš„åœºæ™¯ï¼Œè¦ååˆ†è°¨æ…ï¼›</li>
<li>ç¡®å®å­˜åœ¨å¾ˆå¤šå‚æ•°æ—¶æ‰ä½¿ç”¨ï¼Œå¦åˆ™ä½¿ç”¨æ›´å¸¸è§„çš„æ–¹å¼ä¼šæ›´ç®€æ´ï¼›</li>
<li>åˆ«ç­‰åˆ°å­—æ®µæ‰©å±•åˆ°å¾ˆå¤šæ—¶æ‰ä½¿ç”¨ï¼Œé‚£æ—¶ä¼šå¯¼è‡´æ—§çš„æ„é€ å™¨å’Œæ„å»ºå™¨æ··ç”¨ï¼Œæœ€å¥½ä¸€å¼€å§‹å°±ä½¿ç”¨æ„å»ºå™¨ã€‚</li>
</ul>
<h3 id="ç”¨ç§æœ‰æ„é€ å™¨å’Œæšä¸¾å¼ºåŒ–-Singleton-ç±»å‹"><a href="#ç”¨ç§æœ‰æ„é€ å™¨å’Œæšä¸¾å¼ºåŒ–-Singleton-ç±»å‹" class="headerlink" title="ç”¨ç§æœ‰æ„é€ å™¨å’Œæšä¸¾å¼ºåŒ– Singleton ç±»å‹"></a>ç”¨ç§æœ‰æ„é€ å™¨å’Œæšä¸¾å¼ºåŒ– Singleton ç±»å‹</h3><p>Singletonï¼šä»…ä»…è¢«å®ä¾‹åŒ–ä¸€æ¬¡çš„ç±»ã€‚</p>
<p>1ã€ä½¿ç”¨ç§æœ‰æ„é€ åˆ›å»º Singleton</p>
<pre><code class="java">public class EnhanceSingleton &#123;

    public static final EnhanceSingleton INSTANCE = new EnhanceSingleton();

    private EnhanceSingleton() &#123;
        System.out.println(&quot;new EnhanceSingleton&quot;);
    &#125;

    public static void main(String[] args) &#123;
        EnhanceSingleton instance1 = EnhanceSingleton.INSTANCE;
        EnhanceSingleton instance2 = EnhanceSingleton.INSTANCE;
        System.out.println(instance1 == instance2);
    &#125;
&#125;

// output
new EnhanceSingleton
true
</code></pre>
<p>2ã€ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•åˆ›å»º Singleton</p>
<pre><code class="java">public class EnhanceSingleton &#123;

    private static final EnhanceSingleton INSTANCE = new EnhanceSingleton();

    private EnhanceSingleton() &#123;
        System.out.println(&quot;new EnhanceSingleton&quot;);
    &#125;

    public static EnhanceSingleton getInstance() &#123;
        return INSTANCE;
    &#125;

    public static void main(String[] args) &#123;
        EnhanceSingleton instance3 = EnhanceSingleton.getInstance();
        EnhanceSingleton instance4 = EnhanceSingleton.getInstance();
        System.out.println(instance3 == instance4);
    &#125;
&#125;
</code></pre>
<p>3ã€ä½¿ç”¨å•ä¸ªå…ƒç´ çš„æšä¸¾åˆ›å»º Singleton</p>
<p>å•ä¸ªå…ƒç´ çš„æšä¸¾ç±»å‹æ˜¯å®ç° Singleton æœ€ä½³æ–¹æ³•ã€‚</p>
<pre><code class="java">public enum TestEnum &#123;
    INSTANCE;
&#125;
</code></pre>
<h3 id="é€šè¿‡ç§æœ‰æ„é€ æ–¹æ³•å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›"><a href="#é€šè¿‡ç§æœ‰æ„é€ æ–¹æ³•å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›" class="headerlink" title="é€šè¿‡ç§æœ‰æ„é€ æ–¹æ³•å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›"></a>é€šè¿‡ç§æœ‰æ„é€ æ–¹æ³•å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›</h3><p>æœ‰æ—¶å€™ç¼–å†™ä¸€äº›åªåŒ…å«é™æ€å±æ€§å’Œé™æ€æ–¹æ³•çš„é€šç”¨å·¥å…·ç±»æˆ–è€…å¸¸é‡ç±»ï¼Œè¿™äº›ç±»å®ä¾‹åŒ–æ²¡æœ‰æ„ä¹‰ï¼Œå¯ä»¥é€šè¿‡æ˜¾ç¤ºå®šä¹‰ä¸€ä¸ªç§æœ‰çš„æ„é€ æ–¹æ³•è¦†ç›–é»˜è®¤æ„é€ æ–¹æ³•é˜»æ­¢è¿™äº›ç±»è¢«å®ä¾‹åŒ–ã€‚</p>
<pre><code class="java">public class TestUtil &#123;

    // é€šè¿‡ç§æœ‰æ„é€ æ–¹æ³•å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›
    private TestUtil() &#123;
        throw new AssertionError(&quot;å·¥å…·ç±»ä¸å¯å®ä¾‹åŒ–&quot;);
    &#125;

    public static String filterCharA(String str) &#123;
        if (str == null || &quot;&quot;.equals(str)) &#123;
            return str;
        &#125;
        return str.replaceAll(&quot;a&quot;, &quot;&quot;);
    &#125;
&#125;
</code></pre>
<h3 id="é¿å…åˆ›é€ ä¸å¿…è¦çš„å¯¹è±¡"><a href="#é¿å…åˆ›é€ ä¸å¿…è¦çš„å¯¹è±¡" class="headerlink" title="é¿å…åˆ›é€ ä¸å¿…è¦çš„å¯¹è±¡"></a>é¿å…åˆ›é€ ä¸å¿…è¦çš„å¯¹è±¡</h3><h4 id="1ã€å­—ç¬¦ä¸²"><a href="#1ã€å­—ç¬¦ä¸²" class="headerlink" title="1ã€å­—ç¬¦ä¸²"></a>1ã€å­—ç¬¦ä¸²</h4><blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½èƒ½é‡ç”¨å¯¹è±¡è€Œä¸æ˜¯åœ¨æ¯æ¬¡éœ€è¦çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªå…·æœ‰ç›¸åŒåŠŸèƒ½çš„æ–°å¯¹è±¡ã€‚</p>
<p>å¦‚æœå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼ˆImmutableï¼‰ï¼Œé‚£ä¹ˆå®ƒå§‹ç»ˆå¯ä»¥è¢«é‡ç”¨ã€‚</p>
</blockquote>
<p>åä¾‹: <code>String str = new String(&quot;hello world!&quot;);</code></p>
<p>è¯¥è¯­å¥æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ String å®ä¾‹ï¼Œå‚æ•° â€œhello world!â€ æœ¬èº«å°±æ˜¯ä¸€ä¸ª String å®ä¾‹ï¼ŒåŠŸèƒ½æ–¹é¢ç­‰åŒäºæ„é€ å™¨åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ã€‚å¦‚æœåœ¨å¾ªç¯ä¸­è¢«è°ƒç”¨ï¼Œå°±ä¼šåˆ›å»ºå¤§é‡ä¸å¿…è¦çš„å®ä¾‹ã€‚</p>
<p>æ­£ä¾‹: <code>String str = &quot;hello world!&quot;;</code></p>
<h4 id="2ã€é™æ€å·¥å‚æ–¹æ³•ä¼˜äºæ„é€ å™¨"><a href="#2ã€é™æ€å·¥å‚æ–¹æ³•ä¼˜äºæ„é€ å™¨" class="headerlink" title="2ã€é™æ€å·¥å‚æ–¹æ³•ä¼˜äºæ„é€ å™¨"></a>2ã€é™æ€å·¥å‚æ–¹æ³•ä¼˜äºæ„é€ å™¨</h4><p><strong>å¯¹äºåŒæ—¶æä¾›é™æ€å·¥å‚æ–¹æ³•å’Œæ„é€ å™¨çš„ä¸å¯å˜ç±»ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•è€Œä¸æ˜¯æ„é€ å™¨ï¼Œå¯ä»¥é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ã€‚</strong></p>
<p>åä¾‹: <code>Boolean flag = new Boolean(&quot;true&quot;);</code></p>
<p>æ­£ä¾‹: <code>Boolean flag = Boolean.valueOf(&quot;true&quot;);</code></p>
<h4 id="3ã€é™æ€å±æ€§"><a href="#3ã€é™æ€å±æ€§" class="headerlink" title="3ã€é™æ€å±æ€§"></a>3ã€é™æ€å±æ€§</h4><p>å·²çŸ¥ä¸ä¼šè¢«ä¿®æ”¹çš„å¯¹è±¡ä¹Ÿå¯ä»¥é‡ç”¨ã€‚</p>
<pre><code class="java">public class AvoidNewObj &#123;

    private Date birthDate;

    public AvoidNewObj(Date birthDate) &#123;
        this.birthDate = birthDate;
    &#125;

    // æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸å¿…è¦çš„ Calenda, TimeZone å®ä¾‹
    public boolean isBabyBoomer() &#123;
        Calendar gmt = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT&quot;));
        gmt.set(1946, Calendar.JANUARY, 1, 0, 0, 0);
        Date startTime = gmt.getTime();
        gmt.set(1965, Calendar.JANUARY, 1, 0, 0, 0);
        Date endTime = gmt.getTime();
        return birthDate.after(startTime) &amp;&amp; birthDate.before(endTime);
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class AvoidNewObj1 &#123;

    private static final Date startTime;

    private static final Date endTime;

    private Date birthDate;

    // åªéœ€è¦åˆ›å»ºä¸€æ¬¡ Calendarï¼ŒTimeZone å®ä¾‹
    static &#123;
        Calendar gmt = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT&quot;));
        gmt.set(1946, Calendar.JANUARY, 1, 0, 0, 0);
        startTime = gmt.getTime();
        gmt.set(1965, Calendar.JANUARY, 1, 0, 0, 0);
        endTime = gmt.getTime();
    &#125;

    public AvoidNewObj1(Date birthDate) &#123;
        this.birthDate = birthDate;
    &#125;

    public boolean isBabyBoomer() &#123;
        return birthDate.after(startTime) &amp;&amp; birthDate.after(endTime);
    &#125;
&#125;
</code></pre>
<p>åœ¨åŒä¸€ä¸ªæœºå™¨ä¸Šå¾ªç¯è°ƒç”¨ ä¸€åƒä¸‡æ¬¡ isBabyBoomer() æ–¹æ³•ï¼Œä¼˜åŒ–é’±è€—æ—¶ 3600 æ¯«ç§’ï¼Œä¼˜åŒ–åè€—æ—¶ 330 æ¯«ç§’ï¼Œç›¸å·®åå€å·¦å³ã€‚</p>
<h4 id="4ã€åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»"><a href="#4ã€åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»" class="headerlink" title="4ã€åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»"></a>4ã€åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»</h4><p>ä¼˜å…ˆä½¿ç”¨åŸºæœ¬ç±»å‹è€Œä¸æ˜¯åŒ…è£…ç±»ï¼Œå½“å¿ƒæ— æ„è¯†çš„è‡ªåŠ¨è£…ç®±ã€‚</p>
<pre><code class="java">// è®¡ç®—æ‰€æœ‰ int å€¼çš„å’Œ
// ä½¿ç”¨åŒ…è£…ç±»è€—æ—¶ 6000 æ¯«ç§’
public static void sum() &#123;
    Long sum = 0L;
    for (int i = 0; i &lt; Integer.MAX_VALUE; i++) &#123;
      sum += i;
    &#125;
&#125;
</code></pre>
<pre><code class="java">// è®¡ç®—æ‰€æœ‰ int å€¼çš„å’Œ
// ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œè€—æ—¶ 630 æ¯«ç§’
public static void sum() &#123;
    long startTime = System.currentTimeMillis();
    long sum = 0L;
    for (int i = 0; i &lt; Integer.MAX_VALUE; i++) &#123;
      sum += i;
    &#125;
    long endTime = System.currentTimeMillis();
    System.out.println(&quot;è€—æ—¶(ms): &quot;);
    System.out.println(endTime - startTime);
&#125;
</code></pre>
<h3 id="æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨"><a href="#æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨" class="headerlink" title="æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨"></a>æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨</h3><h4 id="1ã€ä¸€ä¸ªç±»è‡ªå·±ç®¡ç†å†…å­˜å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼"><a href="#1ã€ä¸€ä¸ªç±»è‡ªå·±ç®¡ç†å†…å­˜å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼" class="headerlink" title="1ã€ä¸€ä¸ªç±»è‡ªå·±ç®¡ç†å†…å­˜å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼"></a>1ã€ä¸€ä¸ªç±»è‡ªå·±ç®¡ç†å†…å­˜å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼</h4><blockquote>
<p>åœ¨æ”¯æŒåƒåœ¾å›æ”¶çš„è¯­è¨€ä¸­ï¼Œå†…å­˜æ³„æ¼ï¼ˆæ— æ„è¯†çš„å¯¹è±¡ä¿æŒï¼‰é€šå¸¸æ¯”è¾ƒéšè”½ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡è¢«æ— æ„è¯†çš„ä¿æŒä¸‹æ¥ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸ä»…ä¸ä¼šå¤„ç†è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šå¤„ç†è¿™ä¸ªå¯¹è±¡æ‰€å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ã€‚å³ä¾¿åªæœ‰å°‘é‡çš„å¯¹è±¡è¢«ä¿æŒä¸‹æ¥ï¼Œä¹Ÿä¼šå¯¼è‡´è®¸å¤šå¯¹è±¡è¢«æ’é™¤åœ¨åƒåœ¾å›æ”¶ä¹‹å¤–ï¼Œä»è€Œå¯¹æ€§èƒ½é€ æˆå½±å“ã€‚</p>
<p>è¿™ç±»é—®é¢˜çš„ä¿®å¤å¾ˆç®€å•ï¼šå¦‚æœè¯¥å¼•ç”¨å·²è¿‡æœŸï¼Œæ‰‹åŠ¨æ¸…ç©ºè¯¥å¼•ç”¨ã€‚</p>
</blockquote>
<pre><code class="java">public Object pop() &#123;
    if (size == 0) &#123;
        throw new EmptyStackException();
    &#125;
    Object result = elements[--size];
    // å¼•ç”¨è¿‡æœŸæ—¶ï¼Œæ‰‹åŠ¨æ¸…ç©ºè¯¥å¼•ç”¨
    elements[size] = null;
    return result;
&#125;
</code></pre>
<p>æ¸…ç©ºè¿‡æœŸå¼•ç”¨çš„å¦ä¸€ä¸ªå¥½å¤„ï¼šå¦‚æœä»¥ååˆè¢«é”™è¯¯çš„å¼•ç”¨ï¼Œç¨‹åºä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸æ˜¯æ‚„æ‚„çš„è¿è¡Œä¸‹å»ï¼Œå¯ä»¥æå‰æ£€æµ‹å‡ºç¨‹åºä¸­çš„é”™è¯¯ã€‚</p>
<p><strong>æ¸…ç©ºå¯¹è±¡å¼•ç”¨åº”è¯¥æ˜¯ä¸€ç§ä¾‹å¤–ï¼Œè€Œä¸æ˜¯ä¸€ç§è§„èŒƒï¼Œä¸éœ€è¦è¿‡åˆ†å°å¿ƒã€‚</strong></p>
<h4 id="2ã€ç¼“å­˜å®¹æ˜“å¯¼è‡´å†…ç²—æ³„æ¼"><a href="#2ã€ç¼“å­˜å®¹æ˜“å¯¼è‡´å†…ç²—æ³„æ¼" class="headerlink" title="2ã€ç¼“å­˜å®¹æ˜“å¯¼è‡´å†…ç²—æ³„æ¼"></a>2ã€ç¼“å­˜å®¹æ˜“å¯¼è‡´å†…ç²—æ³„æ¼</h4><p>è¢«æ”¾åˆ°ç¼“å­˜ä¸­çš„å¯¹è±¡å¾ˆå®¹æ˜“è¢«é—å¿˜ï¼Œä»è€Œå¯¼è‡´å¯¹è±¡è¿‡æœŸç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´ï¼Œä¾ç„¶è¢«ä¿ç•™åœ¨ç¼“å­˜ä¸­ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä½¿ç”¨ WeakHashMapï¼›</li>
<li>æ¯æ¬¡æ·»åŠ æ–°æ¡ç›®çš„åŒæ—¶ï¼Œå¯¹è¶…æœŸæˆ–è€…æ— ç”¨çš„å¼•ç”¨è¿›è¡Œæ¸…ç†ï¼›</li>
<li>äº¤ç»™åå°çº¿ç¨‹ï¼ˆTimer æˆ–è€… ScheduledThreadPoolExecutorï¼‰å®Œæˆã€‚</li>
</ol>
<h2 id="ch3-å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•"><a href="#ch3-å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•" class="headerlink" title="ch3 å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•"></a>ch3 å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•</h2><blockquote>
<p>å°½ç®¡ Object ç±»æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»ï¼Œä½†æ˜¯è®¾è®¡å®ƒä¸»è¦æ˜¯ä¸ºäº†æ‰©å±•ï¼Œå®ƒçš„æ‰€æœ‰é final æ–¹æ³• (equals(), hashCode(), toString(), clone() å’Œ finalize()) éƒ½æœ‰æ˜ç¡®çš„é€šç”¨çº¦å®šï¼Œå®ƒä»¬è¢«è®¾è®¡æˆè¦è¢«è¦†ç›–çš„ã€‚å¦‚æœè¦†ç›–è¿™äº›æ–¹æ³•çš„æ—¶å€™ä¸éµå®ˆé€šç”¨çº¦å®šï¼Œé‚£ä¹ˆå¯¹äºå…¶ä»–ä¾èµ–è¿™äº›çº¦å®šçš„ç±»ç»“åˆè¯¥ç±»å°±ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
</blockquote>
<h3 id="è¦†ç›–-equals-çš„æ—¶å€™è¯·éµå®ˆé€šç”¨çº¦å®š"><a href="#è¦†ç›–-equals-çš„æ—¶å€™è¯·éµå®ˆé€šç”¨çº¦å®š" class="headerlink" title="è¦†ç›– equals çš„æ—¶å€™è¯·éµå®ˆé€šç”¨çº¦å®š"></a>è¦†ç›– equals çš„æ—¶å€™è¯·éµå®ˆé€šç”¨çº¦å®š</h3><h4 id="ä¸éœ€è¦è¦†ç›–-equals-æ–¹æ³•çš„åœºæ™¯"><a href="#ä¸éœ€è¦è¦†ç›–-equals-æ–¹æ³•çš„åœºæ™¯" class="headerlink" title="ä¸éœ€è¦è¦†ç›– equals æ–¹æ³•çš„åœºæ™¯"></a>ä¸éœ€è¦è¦†ç›– equals æ–¹æ³•çš„åœºæ™¯</h4><p>equals() æ–¹æ³•çœ‹èµ·æ¥ç®€å•ï¼Œä½†æ˜¯è®¸å¤šè¦†ç›–æ–¹å¼ä¼šå¯¼è‡´å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„ä¸¥é‡é”™è¯¯ï¼Œæœ€å®¹æ˜“é¿å…è¿™ç±»é—®é¢˜çš„æ–¹æ³•å°±æ˜¯ä¸è¦†ç›–è¯¥æ–¹æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»çš„æ¯ä¸ªå®ä¾‹éƒ½åªä¸å®ƒè‡ªèº«ç›¸ç­‰ã€‚</p>
<ol>
<li>ç±»çš„æ¯ä¸ªå®ä¾‹æœ¬è´¨ä¸Šéƒ½æ˜¯å”¯ä¸€çš„ï¼›</li>
<li>ä¸å…³å¿ƒå®ä¾‹çš„é€»è¾‘ç›¸ç­‰ï¼›</li>
<li>è¶…ç±»å·²ç»è¦†ç›–äº† equals æ–¹æ³•ï¼Œä»è¶…ç±»ç»§æ‰¿è¿‡æ¥çš„è¡Œä¸ºå¯¹äºå­ç±»ä¹Ÿæ˜¯é€‚ç”¨çš„ï¼›</li>
<li>equals ç”¨äºä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
</ol>
<p>å¦‚æœç±»æœ‰è‡ªå·±æƒ³ç­‰çš„æ¦‚å¿µï¼Œå¹¶ä¸”çˆ¶ç±»æ²¡æœ‰å®ç°ç›¸åº”çš„ equals æ–¹æ³•æ—¶ï¼Œå°±éœ€è¦è¿›è¡Œè¦†ç›–ã€‚</p>
<p>å¦‚æœå®ä¾‹æ˜¯å—æ§å®ä¾‹ï¼Œå¦‚é™æ€å·¥å‚æ–¹æ³•æ§åˆ¶çš„å®ä¾‹ï¼Œæœ€å¤šåªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå€¼ç›¸ç­‰ä¸å¯¹è±¡ç›¸ç­‰æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼Œè¿™æ—¶ä¸éœ€è¦è¦†ç›– equals æ–¹æ³•ã€‚</p>
<p>è¦†ç›– equals æ–¹æ³•çš„é€šç”¨çº¦å®šï¼š</p>
<ol>
<li>è‡ªåæ€§ï¼›</li>
<li>å¯¹ç§°æ€§ï¼›</li>
<li>ä¼ é€’æ€§ï¼›</li>
<li>ä¸€è‡´æ€§ï¼›</li>
<li>å¯¹äºä»»ä½•é null å¼•ç”¨å€¼ xï¼Œx.equals(null) å¿…é¡»è¿”å› falseã€‚</li>
</ol>
<h4 id="å¦‚ä½•è¦†ç›–-equals-æ–¹æ³•"><a href="#å¦‚ä½•è¦†ç›–-equals-æ–¹æ³•" class="headerlink" title="å¦‚ä½•è¦†ç›– equals æ–¹æ³•"></a>å¦‚ä½•è¦†ç›– equals æ–¹æ³•</h4><ol>
<li><p>ä½¿ç”¨ &#x3D;&#x3D; æ£€æŸ¥å‚æ•°æ˜¯å¦ä¸ºè¯¥å¯¹è±¡çš„å¼•ç”¨ï¼›</p>
</li>
<li><p>ä½¿ç”¨ instanceof åˆ¤æ–­å‚æ•°æ˜¯å¦æ˜¯æ­£ç¡®çš„ç±»å‹ï¼ˆåŒ…å«äº†å‚æ•°ä¸º null çš„åˆ¤æ–­ï¼‰ï¼›</p>
</li>
<li><p>å°†å‚æ•°è½¬æ¢æˆæ­£ç¡®çš„ç±»å‹ï¼›</p>
</li>
<li><p>é€ä¸ªæ£€æŸ¥å¯¹è±¡çš„å…³é”®å±æ€§ï¼Œå¦‚æœå…¨éƒ¨é€šè¿‡ï¼Œè¿”å› true ï¼Œå¦åˆ™è¿”å› falseï¼›</p>
<p>å¯¹äºæ—¢ä¸æ˜¯ float åˆä¸æ˜¯ double çš„åŸºæœ¬ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ &#x3D;&#x3D; è¿›è¡Œæ¯”è¾ƒã€‚å¯¹äºå¼•ç”¨å±æ€§ï¼Œå¯ä»¥é€’å½’è°ƒç”¨ equalsã€‚å¦‚æœæ˜¯ float æˆ–è€…æ˜¯ double ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ Double.compare() å’Œ Float.compare() è¿›è¡Œæ¯”è¾ƒã€‚</p>
</li>
<li><p>ç¼–å†™å®Œ equals æ–¹æ³•ä¹‹åï¼Œé‡æ–°å®¡è§† å¯¹ç§°æ€§ã€ä¼ é€’æ€§å’Œä¸€è‡´æ€§ã€‚</p>
<p>æœ€å¥½ç¼–å†™å•å…ƒæµ‹è¯•è¿›è¡Œæ£€éªŒã€‚</p>
</li>
</ol>
<h4 id="è¦†ç›–-equals-æ–¹æ³•çš„ä¸€äº›å‘Šè¯«"><a href="#è¦†ç›–-equals-æ–¹æ³•çš„ä¸€äº›å‘Šè¯«" class="headerlink" title="è¦†ç›– equals æ–¹æ³•çš„ä¸€äº›å‘Šè¯«"></a>è¦†ç›– equals æ–¹æ³•çš„ä¸€äº›å‘Šè¯«</h4><ol>
<li>è¦†ç›– equals æ–¹æ³•æ—¶æ€»æ˜¯è¦åŒæ—¶è¦†ç›– hashCode() é˜²èŒƒï¼›</li>
<li>ä¸è¦ä¼å›¾è®© equals æ–¹æ³•è¿‡äºæ™ºèƒ½ï¼›</li>
<li>ä¸è¦å°† equals æ–¹æ³•ä¸­çš„å‚æ•°å£°æ˜å¤– Object ä¹‹å¤–çš„ç±»å‹ã€‚</li>
</ol>
<h3 id="è¦†ç›–-equals-æ–¹æ³•æ—¶æ€»æ˜¯è¦è¦†ç›–-hashCode"><a href="#è¦†ç›–-equals-æ–¹æ³•æ—¶æ€»æ˜¯è¦è¦†ç›–-hashCode" class="headerlink" title="è¦†ç›– equals æ–¹æ³•æ—¶æ€»æ˜¯è¦è¦†ç›– hashCode"></a>è¦†ç›– equals æ–¹æ³•æ—¶æ€»æ˜¯è¦è¦†ç›– hashCode</h3><p>ä¸€ä¸ªå¾ˆå¸¸è§çš„é”™è¯¯åœ¨äºæ²¡æœ‰è¦†ç›– hashCode æ–¹æ³•ã€‚è¦†ç›– equals æ—¶ä¸€å®šè¦è¦†ç›– hashCodeï¼Œå¦åˆ™å°±ä¼šè¿å Object.hashCode çš„é€šç”¨è§„åˆ™ï¼Œä»è€Œå¯¼è‡´è¯¥ç±»æ— æ³•ç»“åˆæ‰€æœ‰åŸºäºæ•£åˆ—çš„é›†åˆä¸€èµ·æ­£å¸¸è¿ä½œï¼ŒåŒ…æ‹¬ HashMapã€HashSetã€HashTableã€‚</p>
<p>ğŸ“ƒ hashCode è§„èŒƒï¼š</p>
<ul>
<li>åœ¨åº”ç”¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼Œåªè¦å¯¹è±¡çš„ equals æ–¹æ³•çš„æ¯”è¾ƒæ“ä½œæ‰€ç”¨åˆ°çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå¯¹è±¡è°ƒç”¨å¤šæ¬¡ï¼ŒhashCode æ–¹æ³•éƒ½å¿…é¡»å§‹ç»ˆè¿”å›åŒä¸€ä¸ªæ•´æ•°ï¼›</li>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡æ ¹æ® equals æ–¹æ³•æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡ hashCode ä¹Ÿå¿…é¡»ä¸€è‡´ï¼›</li>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡æ ¹æ® equals æ–¹æ³•æ˜¯ä¸ç›¸ç­‰çš„ï¼Œåˆ™ hashCode å€¼ä¸ä¸€å®šè¦ç›¸ç­‰ï¼›ä½†æ˜¯ä¸ç›¸ç­‰çš„å¯¹è±¡äº§ç”Ÿä¸åŒçš„ hashCodeï¼Œå¯ä»¥æé«˜æ•£åˆ—è¡¨çš„æ€§èƒ½ã€‚</li>
</ul>
<pre><code class="java">public class PhoneNumber &#123;

    private final short areaCode;

    private final short prefix;

    private final short lineNumber;

    public PhoneNumber(int areaCode, int prefix, int lineNumber) &#123;
        this.areaCode = (short) areaCode;
        this.prefix = (short) prefix;
        this.lineNumber = (short) lineNumber;
    &#125;

    // è¦†ç›– equals æ–¹æ³•ä½†æ˜¯æœªè¦†ç›– hashCode æ–¹æ³•
    @Override
    public boolean equals(Object o) &#123;
        if (this == o) &#123;
            return true;
        &#125;
        if (!(o instanceof PhoneNumber)) &#123;
            return false;
        &#125;
        PhoneNumber that = (PhoneNumber) o;
        return areaCode == that.areaCode
                &amp;&amp; prefix == that.prefix
                &amp;&amp; lineNumber == that.lineNumber;
    &#125;
&#125;
</code></pre>
<pre><code class="java">Map&lt;PhoneNumber, String&gt; map = new HashMap&lt;&gt;();
PhoneNumber phoneNumber = new PhoneNumber(1, 2, 3);
map.put(phoneNumber, &quot;tony&quot;);

// hashCode: 356573597
System.out.println(&quot;hashCode: &quot; + phoneNumber.hashCode());

PhoneNumber phoneNumber1 = new PhoneNumber(1, 2, 3);
// hashCode: 1735600054
System.out.println(&quot;hashCode: &quot; + phoneNumber1.hashCode());
// è·å–å€¼
String name = map.get(phoneNumber1);
// return false
// name: false
System.out.println(&quot;name: &quot; + &quot;tony&quot;.equals(name));
</code></pre>
<p>è™½ç„¶è¦†ç›–äº† equals æ–¹æ³•ï¼Œä½†æ˜¯æœªè¦†ç›– hashCodeï¼Œä¸‰ä¸ªå±æ€§ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ equals è¿”å›ç›¸ç­‰ï¼ŒhashCode å´æ˜¯ä¸ç›¸ç­‰çš„ï¼Œè¿åäº† hashCode çº¦å®šçš„ç¬¬äºŒç‚¹ã€‚åœ¨ HashMap ä¸­å› ä¸ºæœ‰ä¸åŒçš„ hashCodeï¼Œæ‰€ä»¥è¿”å›ç»“æœä¸æ˜¯ â€œtonyâ€ è€Œæ˜¯ nullã€‚</p>
<p>è¦†ç›– hashCode æ–¹æ³•å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚è€Œä¸”æ•£åˆ—å‡½æ•°å¯¹æ•£åˆ—è¡¨çš„æ€§èƒ½å½±å“å¾ˆå¤§ï¼Œå› æ­¤ç†æƒ³çš„æ•£åˆ—å‡½æ•°ï¼Œåº”å½“èƒ½å°†é›†åˆä¸­ä¸ç›¸ç­‰çš„å®ä¾‹å‡åŒ€çš„åˆ†å¸ƒåˆ°æ‰€æœ‰çš„æ•£åˆ—å€¼ä¸Šã€‚</p>
<p>ğŸ“ ç¼–å†™æ•£åˆ—å‡½æ•°çš„æ–¹æ³•ï¼š</p>
<ol>
<li>ç¡®å®šä¸€ä¸ªéé›¶å¸¸æ•°å€¼ï¼ˆ17ï¼‰ï¼Œä¿å­˜åˆ° result çš„ int ç±»å‹å˜é‡ä¸­ï¼›</li>
<li>å¯¹äºå¯¹è±¡ä¸­çš„æ¯ä¸ªåŸŸ f:<ol>
<li>è®¡ç®—è¯¥åŸŸçš„æ•£åˆ—å€¼ c: <ol>
<li>booleanç±»å‹: f ? 1 : 0</li>
<li>byte short int: (int) f</li>
<li>long: (int) (f ^ (f &gt;&gt;&gt; 32))</li>
<li>float: Float.floatToIntBits(f)</li>
<li>double: Double.doubleToLongBits(f)</li>
<li>å¯¹è±¡å¼•ç”¨: é€’å½’è°ƒç”¨ hashCode</li>
<li>æ•°ç»„: å¯¹æ¯ä¸ªå…ƒç´ å½“ä½œå•ç‹¬çš„åŸŸæ¥å¤„ç†</li>
</ol>
</li>
<li>è®¡ç®— result &#x3D; 31 * result + c</li>
</ol>
</li>
<li>è¿”å› result</li>
<li>ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯• <strong>ç›¸ç­‰çš„å®ä¾‹æ‹¥æœ‰ç›¸ç­‰çš„æ•£åˆ—ç ã€‚</strong></li>
</ol>
<p>âš ï¸ æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>å¿…é¡»æ’é™¤ equals ä¸­æœªä½¿ç”¨çš„åŸŸ</li>
<li>å¦‚æœè®¡ç®—æ•£åˆ—å€¼å¼€é”€è¾ƒå¤§ï¼Œå¯¹äºä¸å˜ç±»ï¼Œå¯ä»¥è€ƒè™‘ç¼“å­˜æ•£åˆ—ç ï¼›</li>
<li>è®© hashCode è¿”å›ä¸€ä¸ªç¡®å®šçš„æ•°å€¼å¹¶ä¸æ˜¯æ˜æ™ºçš„åšæ³•ï¼Œä¼šé™åˆ¶å°†æ¥æ”¹è¿›æ•£åˆ—å‡½æ•°çš„èƒ½åŠ›ã€‚</li>
</ul>
<h3 id="å§‹ç»ˆè¦è¦†ç›–-toString"><a href="#å§‹ç»ˆè¦è¦†ç›–-toString" class="headerlink" title="å§‹ç»ˆè¦è¦†ç›– toString"></a>å§‹ç»ˆè¦è¦†ç›– toString</h3><p>âœ… å»ºè®®æ‰€æœ‰å­ç±»è¦†ç›– toString æ–¹æ³•ã€‚</p>
<p>æä¾›å¥½çš„ toString å®ç°å¯ä»¥ä½¿ç±»ç”¨èµ·æ¥æ›´åŠ èˆ’é€‚ï¼Œå¯¹äºè°ƒè¯•æœ‰å¥½å¤„ã€‚toString æ–¹æ³•åº”è¯¥è¿”å›æ‰€æœ‰å€¼å¾—å…³æ³¨çš„åŸŸã€‚</p>
<h3 id="è°¨æ…çš„è¦†ç›–-clone"><a href="#è°¨æ…çš„è¦†ç›–-clone" class="headerlink" title="è°¨æ…çš„è¦†ç›– clone"></a>è°¨æ…çš„è¦†ç›– clone</h3><blockquote>
<p>Cloneable æ¥å£çš„ç›®çš„æ˜¯ä½œä¸ºå¯¹è±¡çš„ä¸€ä¸ª mixin æ¥å£ï¼Œè¡¨æ˜è¿™æ ·çš„å¯¹è±¡å…è®¸æ‹·è´ã€‚é—æ†¾çš„æ˜¯ï¼Œå®ƒæ²¡æœ‰è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œå› ä¸ºå®ƒç¼ºå°‘ä¸€ä¸ª clone æ–¹æ³•ã€‚Object ç±»çš„ clone æ–¹æ³•æ˜¯å—ä¿æŠ¤çš„ï¼Œå¦‚æœä¸å€ŸåŠ©åå°„ï¼Œå°±ä¸èƒ½ä»…ä»…å› ä¸ºä¸€ä¸ªç±»å®ç°äº† Cloneable æ¥å£ï¼Œå°±å¯ä»¥è°ƒç”¨ clone æ–¹æ³•ï¼Œå³ä½¿ä½¿ç”¨åå°„ï¼Œä¹Ÿæœ‰å¯èƒ½å¤±è´¥ï¼Œå› ä¸ºä¸èƒ½ä¿è¯è¯¥å¯¹è±¡å…·æœ‰å¯è®¿é—®çš„ clone æ–¹æ³•ã€‚</p>
</blockquote>
<pre><code class="java">// Object ç±»ä¸­å—ä¿æŠ¤çš„ clone() æ–¹æ³•
protected native Object clone() throws CloneNotSupportedException;
</code></pre>
<pre><code class="java">// Cloneable æ¥å£
public interface Cloneable &#123;
&#125;
</code></pre>
<p>æ—¢ç„¶ Cloneable æ²¡æœ‰åŒ…å«ä»»ä½•æ–¹æ³•ï¼Œé‚£å®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒå†³å®šäº† Object ç±»ä¸­å—ä¿æŠ¤çš„ clone æ–¹æ³•çš„å®ç°çš„è¡Œä¸ºï¼Œå¦‚æœä¸€ä¸ªç±»å®ç°äº† Cloneable æ¥å£ï¼ŒObject ç±»ä¸­çš„ clone æ–¹æ³•å°±è¿”å›è¯¥å¯¹è±¡é€åŸŸæ‹·è´ï¼Œ<strong>å¦åˆ™ç›´æ¥æŠ›å‡º java.lang.CloneNotSupportedException å¼‚å¸¸</strong>ã€‚</p>
<p><em>é€šå¸¸å®ç°æ¥å£çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è¡¨æ˜ç±»å¯ä»¥ä¸ºå®ƒçš„å®¢æˆ·åšäº›ä»€ä¹ˆã€‚ç„¶è€Œå¯¹äº Cloneable æ¥å£ï¼Œå®ƒæ”¹å˜äº†è¶…ç±»ä¸­å—ä¿æŠ¤çš„æ–¹æ³•çš„è¡Œä¸ºã€‚</em></p>
<p>æ— éœ€è°ƒç”¨æ„é€ å™¨å°±å¯ä»¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>clone æ–¹æ³•çš„é€šç”¨çº¦å®šï¼š</p>
<ul>
<li>x.clone() !&#x3D; x ä¸º true</li>
<li>x.clone.getClass() &#x3D;&#x3D; x.getClass ä¸ºtrue</li>
</ul>
<p>ä½†æ˜¯è¿™äº›éƒ½ä¸æ˜¯ç»å¯¹çš„è¦æ±‚ã€‚</p>
<p>å®ç°äº† Cloneable æ¥å£çš„ç±»ï¼Œéƒ½åº”è¯¥æä¾›ä¸€ä¸ªå…¬æœ‰çš„ clone æ–¹æ³•ï¼Œæ­¤æ–¹æ³•å†…éƒ¨å…ˆè°ƒç”¨ super.clone() ï¼Œç„¶åä¿®æ­£ä»»ä½•éœ€è¦ä¿®æ­£çš„åŸŸã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€è¦æ‹·è´ä»»ä½•åŒ…å«å†…éƒ¨<strong>æ·±å±‚ç»“æ„</strong>çš„å¯å˜å¯¹è±¡ï¼Œå¹¶ç”¨æŒ‡å‘æ–°å¯¹è±¡çš„å¼•ç”¨ä»£æ›¿åŸæ¥æŒ‡å‘è¿™äº›å¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<pre><code class="java">@Override
public Company clone() throws CloneNotSupportedException &#123;
  Company clone = (Company) super.clone();
  clone.numbers = numbers.clone();
  return clone;
&#125;
</code></pre>
<p>å¦ä¸€ä¸ªå®ç°å¯¹è±¡æ‹·è´çš„å¥½åŠæ³•æ˜¯æä¾›ä¸€ä¸ªæ‹·è´æ„é€ å™¨æˆ–æ‹·è´å·¥å‚ã€‚æ‹·è´æ„é€ å™¨çš„å”¯ä¸€å‚æ•°ä¸ºè¯¥æ„é€ å™¨çš„ç±»ï¼Œæ¯”å¦‚ new TreeSet&lt;&gt;() ã€‚</p>
<pre><code class="java">public Company newInstance() &#123;
    return new Company(name, numbers);
&#125;
</code></pre>
<p>æ‹·è´æ„é€ å™¨åŠé™æ€å·¥å‚æ–¹æ³•ç›¸å¯¹äº clone çš„å¥½å¤„ï¼š</p>
<ol>
<li>ä¸ç”¨éµå®ˆçº¦å®šï¼›</li>
<li>ä¸ä¼šä¸ final åŸŸå†²çªï¼›</li>
<li>ä¸ä¼šæŠ›å‡ºä¸å—æ£€æŸ¥çš„å¼‚å¸¸ï¼›</li>
<li>ä¸éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li>
</ol>
<p>å»ºè®®ï¼š<strong>ä¸åº”è¯¥æ‰©å±•ã€å®ç° Cloneable æ¥å£ï¼Œä¹Ÿä¸åº”è¯¥è¦†ç›–ã€è°ƒç”¨ clone æ–¹æ³•ã€‚</strong></p>
<h3 id="è€ƒè™‘å®ç°-Comparable-æ¥å£"><a href="#è€ƒè™‘å®ç°-Comparable-æ¥å£" class="headerlink" title="è€ƒè™‘å®ç° Comparable æ¥å£"></a>è€ƒè™‘å®ç° Comparable æ¥å£</h3><p>compareTo æ–¹æ³•æ˜¯ Comparable æ¥å£ä¸­å”¯ä¸€çš„æ–¹æ³•ï¼Œä¸”æ˜¯ä¸€ä¸ªèŒƒå‹æ–¹æ³•ã€‚ä¸€ä¸ªç±»å®ç°äº† Comparable æ¥å£ï¼Œåˆ™è¡¨æ˜å®ƒçš„å®ä¾‹å…·æœ‰å†…åœ¨çš„æ’åºå…³ç³»ï¼ˆå¤§å°ã€çŠ¶æ€ç­‰ï¼‰ã€‚è€Œä¸”ï¼Œå®ç° Comparable æ¥å£ä¹‹åï¼Œå®ƒå°±å¯ä»¥å’Œè®¸å¤šèŒƒå‹ç®—æ³•ä»¥åŠä¾èµ–äºè¯¥æ¥å£å®ç°çš„é›†åˆè¿›è¡Œåä½œï¼Œä»˜å‡ºå¾ˆå°çš„åŠªåŠ›å°±å¯ä»¥è·å¾—å¼ºå¤§çš„åŠŸèƒ½ã€‚Java å¹³å°ç±»åº“ä¸­æ‰€æœ‰å€¼ç±»éƒ½å®ç°äº†è¿™ä¸ªæ¥å£ã€‚å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå€¼ç±»ï¼Œå…¶å…·æœ‰æ˜æ˜¾çš„å†…åœ¨æ’åºå…³ç³»ï¼Œæ¯”å¦‚æŒ‰å­—æ¯ã€æ•°å€¼ã€å¹´ä»£ç­‰æ’åºï¼Œåˆ™åº”åšå†³è€ƒè™‘å®ç°è¿™ä¸ªæ¥å£ã€‚</p>
<pre><code class="java">public interface Comparable&lt;T&gt; &#123;
&#125;
</code></pre>
<p>ç¼–å†™ compareTo æ–¹æ³•ä¸ç¼–å†™ equals æ–¹æ³•ä¸åŒä¹‹å¤„ï¼šComparable æ¥å£æ˜¯èŒƒå‹æ¥å£ï¼Œè€Œä¸”æ˜¯é™æ€ç±»å‹ï¼Œå› æ­¤ä¸å¿…è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä¹Ÿä¸ç”¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚å¦‚æœå‚æ•°ä¸º nullï¼Œåˆ™ä¼šæŠ›å‡º NullPointerExceptionã€‚</p>
<p>compareTo æ–¹æ³•æ˜¯å¯¹äºé¡ºåºçš„æ¯”è¾ƒï¼Œæ¯”è¾ƒå¯¹è±¡å¼•ç”¨åŸŸå¯ä»¥é€šè¿‡é€’å½’è°ƒç”¨ compareTo æ–¹æ³•å®ç°ã€‚æ¯”è¾ƒæ•´å½¢åŸºæœ¬ç±»å‹æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ &lt; æˆ– &gt; æ¥å®ç°ï¼›æ¯”è¾ƒæµ®ç‚¹æ•°å¯ä»¥ä½¿ç”¨ Double.compareTo æˆ– Float.compareTo æ¥å®ç°ï¼›å¯¹äºæ•°ç»„ï¼Œåˆ™è¦å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚</p>
<pre><code class="java">public class Task implements Comparable&lt;Task&gt; &#123;

    public static List&lt;String&gt; TASK_STATUS_LIST = Arrays.asList(&quot;è‰ç¨¿&quot;, &quot;å¾…å®¡æ‰¹&quot;, &quot;å®¡æ‰¹é€šè¿‡&quot;, &quot;å½’æ¡£&quot;);

    private String name;

    private String taskStatus;

    public Task(String name, String taskStatus) &#123;
        this.name = name;
        this.taskStatus = taskStatus;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;Task&#123;&quot; +
                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +
                &quot;, taskStatus=&#39;&quot; + taskStatus + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;

    @Override
    public int compareTo(Task o) &#123;
        int index = getStatusIndex(this);
        int index1 = getStatusIndex(o);
        return Integer.compare(index, index1);
    &#125;

    private static int getStatusIndex(Task task) &#123;
        for (int i = 0; i &lt; TASK_STATUS_LIST.size(); i++) &#123;
            if (TASK_STATUS_LIST.get(i).equals(task.getTaskStatus())) &#123;
                return i;
            &#125;
        &#125;

        System.out.println(&quot;ä»»åŠ¡çŠ¶æ€ä¸åˆæ³•&quot;);
        return 99;
    &#125;
&#125;

// data
Task task1 = new Task(&quot;task1&quot;, &quot;è‰ç¨¿&quot;);
Task task2 = new Task(&quot;task2&quot;, &quot;å¾…å®¡æ‰¹&quot;);
Task task3 = new Task(&quot;task3&quot;, &quot;å®¡æ‰¹é€šè¿‡&quot;);
Task task4 = new Task(&quot;task4&quot;, &quot;å½’æ¡£&quot;);
Task task5 = new Task(&quot;task5&quot;, &quot;å…¶ä»–&quot;);

// output
[task1 -&gt; è‰ç¨¿]

[task2 -&gt; å¾…å®¡æ‰¹]

[task3 -&gt; å®¡æ‰¹é€šè¿‡]

[task4 -&gt; å½’æ¡£]

[task5 -&gt; å…¶ä»–]
</code></pre>
<p>å› ä¸º compareTo æ–¹æ³•æ²¡æœ‰æŒ‡å®šè¿”å›å€¼çš„å¤§å°ï¼Œåªæ˜¯æŒ‡å®šäº†ç¬¦å·ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ç®€åŒ–å¯¹å¤šä¸ªåŸŸè¿›è¡Œæ¯”è¾ƒæ—¶çš„ä»£ç ã€‚ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼Œè¦ç‰¹åˆ«è€ƒè™‘ç»“æœæº¢å‡ºçš„æƒ…å†µï¼Œæº¢å‡ºä¼šå¯¼è‡´ compareTo è¿”å›é”™è¯¯çš„ç»“æœï¼Œå¹¶ä¸”è¿™æ ·çš„é”™è¯¯å¾ˆéš¾è°ƒè¯•ã€‚</p>
<h2 id="ch4-ç±»å’Œæ¥å£"><a href="#ch4-ç±»å’Œæ¥å£" class="headerlink" title="ch4 ç±»å’Œæ¥å£"></a>ch4 ç±»å’Œæ¥å£</h2><h3 id="ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–"><a href="#ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–" class="headerlink" title="ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–"></a>ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–</h3><p>ä¿¡æ¯éšè—å¯ä»¥ä½¿å„ç³»ç»Ÿå„æ¨¡å—ä¹‹é—´è§£è€¦ï¼Œä½¿å¾—è¿™äº›æ¨¡å—å¯ä»¥ç‹¬ç«‹çš„å¼€å‘ã€æµ‹è¯•ã€ä¼˜åŒ–å’Œä½¿ç”¨ã€‚</p>
<p>ä¿¡æ¯éšè—çš„è§„åˆ™ï¼š</p>
<ol>
<li><p>å°½å¯èƒ½çš„ä½¿æ¯ä¸ªç±»æˆ–æˆå‘˜ä¸è¢«å¤–ç•Œè®¿é—®ï¼›</p>
</li>
<li><p>å®ä¾‹åŸŸç»ä¸èƒ½å…¬æœ‰ï¼›å¦‚æœåŸŸæ˜¯é final çš„ï¼Œæˆ–è€…æŒ‡å‘å¯å˜å¯¹è±¡çš„ final å¼•ç”¨ï¼Œè¿™ä¸ªåŸŸä¸€æ—¦å…¬æœ‰ï¼Œå°†å¯¹å®ƒå¤±å»æ§åˆ¶ã€‚é™æ€åŸŸä¹Ÿä¸èƒ½å…¬æœ‰ï¼Œé™¤éè¦é€šè¿‡ public static final æ¥æš´éœ²ä¸€äº›å¸¸é‡ã€‚é€šå¸¸ç”¨å¤§å†™å­—æ¯åŠ ä¸Šä¸‹åˆ’çº¿æ¥è¡¨ç¤ºï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™äº›åŸŸè¦ä¹ˆæ˜¯åŒ…å«åŸºæœ¬ç±»å‹çš„å€¼ï¼Œè¦ä¹ˆæŒ‡å‘ä¸å¯å˜å¯¹è±¡çš„å¼•ç”¨ã€‚å¦‚æœ final åŸŸåŒ…å«å¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒä¾¿å…·æœ‰é final åŸŸæ‰€æœ‰çš„ç¼ºç‚¹ã€‚è™½ç„¶å¼•ç”¨æœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä½†æ˜¯å¼•ç”¨å®ƒå¼•ç”¨çš„å¯¹è±¡å´æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚</p>
<p><strong>é•¿åº¦é 0 çš„æ•°ç»„æ€»æ˜¯å¯å˜çš„ã€‚</strong>æ‰€ä»¥ï¼Œå…·æœ‰ public static final æ•°ç»„åŸŸï¼Œæˆ–è€…è¿”å›è¿™ç§åŸŸçš„è®¿é—®æ–¹æ³•ï¼Œå‡ ä¹æ€»æ˜¯é”™è¯¯çš„ï¼å› ä¸ºè¿™ç§åŸŸå¯ä»¥è¢«ä»»æ„ä¿®æ”¹ã€‚</p>
<pre><code class="java">public static String[] TASK_STATUS_LIST = &#123;&quot;è‰ç¨¿&quot;, &quot;å¾…å®¡æ‰¹&quot;, &quot;å®¡æ‰¹é€šè¿‡&quot;, &quot;å½’æ¡£&quot;&#125;;

// ä¿®æ”¹é•¿åº¦é 0 çš„å…¬æœ‰é™æ€æ•°ç»„åŸŸ
Task.TASK_STATUS_LIST[0] = &quot;ä¿®æ”¹åçš„å†…å®¹&quot;;

// è§£å†³æ–¹æ¡ˆ1
// å°†å…¬æœ‰å˜ä¸ºç§æœ‰ï¼Œå¹¶å¢åŠ ä¸€ä¸ªå…¬æœ‰çš„ä¸å¯å˜åˆ—è¡¨
private static String[] TASK_STATUS_LIST = &#123;&quot;è‰ç¨¿&quot;, &quot;å¾…å®¡æ‰¹&quot;, &quot;å®¡æ‰¹é€šè¿‡&quot;, &quot;å½’æ¡£&quot;&#125;;
public static String[] getTaskStatusList() &#123;
    return Collections.unmodifiableList(TASK_STATUS_LIST);
&#125;

// è§£å†³æ–¹æ¡ˆ2
// å°†æ•°ç»„å˜ä¸ºç§æœ‰ï¼Œå¹¶ä¸”æ·»åŠ ä¸€ä¸ªå…¬æœ‰æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„çš„å¤‡ä»½
public static String[] getTaskStatusList() &#123;
    return TASK_STATUS_LIST.clone();
&#125;
</code></pre>
</li>
</ol>
<p>æ€»è€Œè¨€ä¹‹ï¼š<strong>åº”å½“å§‹ç»ˆé™ä½å¯è®¿é—®æ€§ä¸”é˜²æ­¢å°†æ•£ä¹±çš„ç±»ã€æ¥å£æˆ–æˆå‘˜å˜æˆ API çš„ä¸€éƒ¨åˆ†ï¼Œé™¤äº†å…¬æœ‰é™æ€ final åŸŸç‰¹æ®Šæƒ…å†µå¤–ï¼Œå…¬æœ‰ç±»ä¸åº”åŒ…å«å…¬æœ‰åŸŸï¼Œå¹¶ä¸”è¦ç¡®ä¿å…¬æœ‰é™æ€ final å¼•ç”¨çš„å¯¹è±¡éƒ½æ˜¯ä¸å¯å˜çš„ã€‚</strong></p>
<h3 id="åœ¨å…¬æœ‰ç±»ä¸­ä½¿ç”¨å…¬æœ‰æ–¹æ³•è€Œéå…¬æœ‰åŸŸ"><a href="#åœ¨å…¬æœ‰ç±»ä¸­ä½¿ç”¨å…¬æœ‰æ–¹æ³•è€Œéå…¬æœ‰åŸŸ" class="headerlink" title="åœ¨å…¬æœ‰ç±»ä¸­ä½¿ç”¨å…¬æœ‰æ–¹æ³•è€Œéå…¬æœ‰åŸŸ"></a>åœ¨å…¬æœ‰ç±»ä¸­ä½¿ç”¨å…¬æœ‰æ–¹æ³•è€Œéå…¬æœ‰åŸŸ</h3><p>æœ‰æ—¶å€™å¯èƒ½ä¼šç¼–å†™ä¸€äº›é€€åŒ–ç±»ï¼Œè¿™ç§ç±»ä»…ä»…ç”¨æ¥é›†ä¸­å®ä¾‹åŸŸã€‚</p>
<pre><code class="java">public class Point &#123;

    public double x;
    
    public double y;
&#125;
</code></pre>
<p>ç”±äºè¿™ç§ç±»çš„æ•°æ®åŸŸæ˜¯ç›´æ¥å¯ä»¥è®¿é—®çš„ï¼Œè¿™äº›ç±»æ²¡æœ‰æä¾›å°è£… API çš„åŠŸèƒ½ï¼Œå¦‚æœä¸æ”¹å˜ APIï¼Œå°±æ— æ³•æ”¹å˜çš„å®ƒçš„æ•°æ®è¡¨ç¤ºæ³•ï¼Œä¹Ÿæ— æ³•å¼ºåŠ ä»»ä½•çº¦æŸæ¡ä»¶ï¼Œå½“åŸŸè¢«è®¿é—®çš„æ—¶å€™ï¼Œæ— æ³•é‡‡å–ä»»ä½•è¾…åŠ©æªæ–½ã€‚è¿™ç§ç±»åº”è¯¥ç”¨ç§æœ‰åŸŸå’Œå…¬æœ‰è®¿é—®æ–¹æ³•æ¥ä»£æ›¿ï¼Œgetter å’Œ setter æ–¹æ³•ã€‚</p>
<h3 id="ä½¿å¯å˜å½¢æœ€å°"><a href="#ä½¿å¯å˜å½¢æœ€å°" class="headerlink" title="ä½¿å¯å˜å½¢æœ€å°"></a>ä½¿å¯å˜å½¢æœ€å°</h3><p>ä¸å¯å˜ç±»åªæ˜¯å…¶å®ä¾‹ä¸å¯è¢«ä¿®æ”¹çš„ç±»ã€‚æ¯ä¸ªå®ä¾‹åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯å¿…é¡»åœ¨<strong>åˆ›å»ºè¯¥å®ä¾‹çš„æ—¶å€™å°±æä¾›</strong>ï¼Œå¹¶åœ¨å¯¹è±¡çš„æ•´æ”¹ç”Ÿå‘½å‘¨æœŸå†…å›ºå®šä¸å˜ã€‚Java å¹³å°å†…çš„ä¸å¯å˜ç±»ï¼šStringã€åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»ã€BigInteger å’Œ BigDecimal ç±»ã€‚å­˜åœ¨è®¸å¤šä¸å¯å˜çš„ç±»çš„ç†ç”±ï¼šæ˜“äºè®¾è®¡ã€å®ç°å’Œä½¿ç”¨ï¼Œè€Œä¸”æ›´åŠ å®‰å…¨ã€‚</p>
<p>ä¸ºäº†ä½¿ç±»æˆä¸ºä¸å¯å˜ç±»ï¼Œéœ€è¦éµå¾ª 5 æ¡è§„åˆ™ï¼š</p>
<ol>
<li>ä¸è¦æä¾›ä»»ä½•ä¼šä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„æ–¹æ³•ï¼›</li>
<li>ä¿è¯ç±»ä¸ä¼šè¢«æ‰©å±•ï¼ˆä¸€èˆ¬ä½¿ç”¨ final ï¼‰ï¼›</li>
<li>æ‰€æœ‰åŸŸéƒ½æ˜¯ final çš„ï¼›</li>
<li>æ‰€æœ‰åŸŸéƒ½æ˜¯ç§æœ‰çš„ï¼ˆé˜²æ­¢è¢«å¼•ç”¨çš„å¯å˜å¯¹è±¡ï¼‰ï¼›</li>
<li>ç¡®ä¿ä»»ä½•å¯å˜ç»„ä»¶çš„äº’æ–¥è®¿é—®ï¼ˆå¦‚æœç±»å…·æœ‰æŒ‡å‘å¯å˜å¯¹è±¡çš„åŸŸï¼Œåˆ™å¿…é¡»ç¡®ä¿è¯¥ç±»çš„å®¢æˆ·ç«¯æ— æ³•è·å¾—æŒ‡å‘è¿™äº›å¯¹è±¡çš„å¼•ç”¨ï¼‰ã€‚</li>
</ol>
<h3 id="å¤åˆä¼˜äºç»§æ‰¿"><a href="#å¤åˆä¼˜äºç»§æ‰¿" class="headerlink" title="å¤åˆä¼˜äºç»§æ‰¿"></a>å¤åˆä¼˜äºç»§æ‰¿</h3><p>å°è£…ã€ç»§æ‰¿ã€å¤šæ€æ˜¯é¢å‘å¯¹è±¡çš„ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚ç»§æ‰¿è¿è¡Œåœ¨ä¸æ”¹å˜åŸæœ‰ç±»çš„æƒ…å†µä¸‹ï¼Œå¯¹å…¶è¿›è¡Œæ‰©å±•ï¼Œæ˜¯å®ç°ä»£ç é‡ç”¨çš„å¼ºæœ‰åŠ›æ‰‹æ®µã€‚</p>
<p>åœ¨åŒ…å†…ä½¿ç”¨ç»§æ‰¿æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºç»§æ‰¿å’Œå®ç°å¤„äºåŒä¸€ä¸ªç¨‹åºå‘˜çš„æ§åˆ¶ä¹‹ä¸‹ã€‚ä½†æ˜¯å¯¹äºæ™®é€šç±»ï¼ˆä¸æ˜¯ä¸“é—¨ä¸ºäº†ç»§æ‰¿è€Œè®¾è®¡çš„ç±»ï¼‰è¿›è¡Œè¿›è¡Œè·¨åŒ…è¾¹ç•Œç»§æ‰¿åˆ™æ˜¯éå¸¸å±é™©çš„ã€‚</p>
<p><strong>ç»§æ‰¿æ‰“ç ´äº†å°è£…æ€§</strong>ã€‚å­ç±»çš„å®ç°ä¾èµ–äºåŸºç±»çš„å®ç°ç»†èŠ‚ï¼Œå¦‚æœåŸºç±»çš„å®ç°ç»†èŠ‚å‘ç”Ÿå˜æ›´ï¼Œåˆ™å­ç±»å¯èƒ½ä¼šå®Œå…¨é­åˆ°ç ´åï¼Œå³ä½¿å­ç±»åšä»»ä½•æ›´æ”¹ã€‚</p>
<p>ä¸€ä¸ªç»§æ‰¿ HashSet ç±»çš„ä¾‹å­ï¼Œæ·»åŠ äº†ä¸€ä¸ªåŸŸ addCount è®°å½•æ·»åŠ å…ƒç´ çš„ä¸ªæ•°ï¼š</p>
<pre><code class="java">public class MyHashSet&lt;E&gt; extends HashSet&lt;E&gt; &#123;

    private int addCount;

    @Override
    public boolean add(E e) &#123;
        this.addCount++;
        return super.add(e);
    &#125;

    @Override
    public boolean addAll(Collection&lt;? extends E&gt; c) &#123;
        this.addCount += c.size();
        return super.addAll(c);
    &#125;
&#125;
</code></pre>
<p>åœ¨è¯¥ç±»ä¸­è¦†ç›–äº† HashSet ä¸­çš„ add å’Œ addAll æ–¹æ³•ï¼Œçœ‹ä¼¼æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯é€šè¿‡æµ‹è¯•å‘ç°è¿™ä¸ªç±»æ˜¯æœ‰é—®é¢˜çš„ï¼Œå…ˆæ‰§è¡Œ add ç„¶åæ‰§è¡Œ addAll åè¿”å›çš„ addCount ä¸æ­£ç¡®ã€‚</p>
<p>å› ä¸º HashSet ä¸­ï¼ŒaddAll æ–¹æ³•æ˜¯è°ƒç”¨ add æ–¹æ³•æ¥æ‰§è¡Œæ·»åŠ æ“ä½œçš„ï¼Œæ‰€ä»¥è°ƒç”¨ addAll ä¹‹ååˆå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œ add æ“ä½œï¼Œå› æ­¤ addCount ä¼šè¿”å›é”™è¯¯çš„å€¼ã€‚</p>
<p>åªè¦åˆ é™¤ MyHashSet ç±»ä¸­çš„ addAll æ–¹æ³•å°±å¯ä»¥ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œç›´æ¥è°ƒç”¨ HashSet ç±»çš„ addAll æ–¹æ³•ï¼Œä½†æ˜¯å®ƒçš„æ­£ç¡®æ€§ä¾ç„¶ä¾èµ–äº addAll æ˜¯åœ¨ add ä¹‹ä¸Šå®ç°è¿™ç§äº‹å®ï¼Œå¯èƒ½åˆ«çš„å¹³å°çš„å®ç°æ–¹å¼å¹¶éå¦‚æ­¤ï¼Œå¯èƒ½å°†æ¥ HashSet ç±»ä¼šä¿®æ”¹è¿™ä¸ªå®ç°æ–¹å¼ï¼Œè¿™äº›æƒ…å†µä¸‹éƒ½ä¼šå¯¼è‡´è¯¥ç±»å‡ºé”™ï¼Œæ€»ä¹‹ï¼Œè¿™ä¸ªç±»éå¸¸è„†å¼±ï¼</p>
<p>è¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯è¦†ç›– addAll æ–¹æ³•ï¼Œè‡ªå·±å®ç° addAll æ–¹æ³•ï¼Œå¾ªç¯ addAll çš„å‚æ•°é›†åˆï¼Œå¾ªç¯è°ƒç”¨ add æ–¹æ³•ã€‚è¿™ç§æƒ…å†µä¸‹ç›¸å½“äºé‡æ–°å®ç°äº†è¶…ç±»çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰å­ç±»æ— æ³•è®¿é—®çš„ç§æœ‰åŸŸï¼Œæœ‰äº›æ–¹æ³•å°±æ— æ³•å®ç°ã€‚</p>
<p>å¯¼è‡´å­ç±»è„†å¼±è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯åŸºç±»å¯èƒ½åœ¨åç»­çš„ç‰ˆæœ¬è·å¾—æ–°æ–¹æ³•ï¼Œåˆ™å¯èƒ½ä»…ä»…ç”±äºè°ƒç”¨äº†æœªè¢«å­ç±»è¦†ç›–çš„æ–°æ–¹æ³•è€Œå¯¼è‡´é”™è¯¯ã€‚</p>
<p>å¦‚æœåœ¨æ‰©å±•ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œä»…ä»…æ˜¯æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œè€Œä¸å»è¦†ç›–åŸæœ‰çš„æ–¹æ³•ï¼Œå¯èƒ½æ˜¯æ¯”è¾ƒå®‰å…¨çš„åšæ³•ã€‚ä½†æ˜¯å¦‚æœåç»­ç‰ˆæœ¬ä¸­åŸºç±»æ–°å¢äº†ä¸€ä¸ªå’Œå­ç±»åŒååŒå‚æ•°ä½†æ˜¯ä¸åŒè¿”å›ç±»å‹çš„æ–¹æ³•ï¼Œåˆ™ä¼šå¯¼è‡´å­ç±»æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</p>
<p>å¤åˆå¯ä»¥å¾ˆå¥½çš„è§£å†³ä»¥ä¸Šçš„é—®é¢˜ã€‚åœ¨æ–°çš„ç±»ä¸­å¢åŠ ä¸€ä¸ªç§æœ‰åŸŸå¼•ç”¨åˆ°ç°æœ‰ç±»çš„å®ä¾‹ï¼Œæ–°ç±»ä¸­çš„æ¯ä¸ªå®ä¾‹æ–¹æ³•éƒ½å¯ä»¥è°ƒç”¨ç°æœ‰ç±»çš„æ–¹æ³•å¹¶å¾—åˆ°å…¶ç»“æœï¼Œè¿™ç§ç±»éå¸¸ç¨³å›ºï¼Œå› ä¸ºå…¶ä¸ä¾èµ–äºç°æœ‰ç±»çš„å®ç°ç»†èŠ‚ï¼Œå³ä½¿ç°æœ‰çš„ç±»å¢åŠ äº†æ–°çš„æ–¹æ³•ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°æ–°çš„ç±»ã€‚</p>
<pre><code class="java">public class MyHashSet1&lt;E&gt; &#123;

    private int addCount;

    // æ–°çš„ç±»æ–°å¢ç§æœ‰åŸŸå¼•ç”¨åˆ°ç°æœ‰ç±»çš„å®ä¾‹
    private HashSet&lt;E&gt; hashSet = new HashSet&lt;&gt;();

    public boolean add(E e) &#123;
        this.addCount++;
        return this.hashSet.add(e);
    &#125;

    public boolean addAll(Collection&lt;? extends E&gt; c) &#123;
        this.addCount += c.size();
        return this.hashSet.addAll(c);
    &#125;
&#125;
</code></pre>
<p>åªæœ‰å½“å­ç±»å‹çœŸæ­£æ˜¯è¶…ç±»çš„å­ç±»å‹æ—¶ä½¿ç”¨ç»§æ‰¿æ‰æ˜¯æ°å½“çš„ã€‚å³ä¾¿å¦‚æ­¤ï¼Œå¦‚æœå­ç±»å’Œè¶…ç±»å¤„åœ¨ä¸åŒçš„åŒ…ä¸­ï¼Œå¹¶ä¸”è¶…ç±»å¹¶ä¸æ˜¯ä¸ºäº†ç»§æ‰¿è€Œè®¾è®¡çš„ï¼Œé‚£ä¹ˆç»§æ‰¿ä¹Ÿå°†å¯¼è‡´è„†å¼±æ€§ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨å¤åˆå’Œè½¬å‘æœºåˆ¶ä»£æ›¿ç»§æ‰¿ã€‚</p>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>åŠ è½½è¯„è®ºéœ€è¦åœ¨æµè§ˆå™¨å¯ç”¨ JavaScript è„šæœ¬æ”¯æŒã€‚</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">é¦–é¡µ</a></li>
        
          <li><a href="/archives/">å½’æ¡£</a></li>
        
          <li><a href="/friends/">å‹é“¾</a></li>
        
          <li><a href="/about/">å…³äº</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html">å¼€å¾€ ğŸš‡</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ch2-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.</span> <span class="toc-text">ch2 åˆ›å»ºå’Œé”€æ¯å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%83%E8%99%91%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E4%BB%A3%E6%9B%BF%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E7%9B%B8%E6%AF%94%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E5%90%8D%E7%A7%B0%EF%BC%9B"><span class="toc-number">1.1.1.</span> <span class="toc-text">1ã€é™æ€å·¥å‚æ–¹æ³•ç›¸æ¯”æ„é€ æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼›</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E6%8E%A7%E5%88%B6%E5%8D%95%E4%BE%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">2ã€é™æ€å·¥å‚æ–¹æ³•å¯ä»¥æ§åˆ¶å•ä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%8F%AF%E4%BB%A5%E8%BF%94%E5%9B%9E%E5%8E%9F%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AD%90%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.3.</span> <span class="toc-text">3ã€å¯ä»¥è¿”å›åŸè¿”å›ç±»å‹çš„å­ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%87%E5%88%B0%E5%A4%9A%E4%B8%AA%E6%9E%84%E9%80%A0%E5%99%A8%E5%8F%82%E6%95%B0%E6%97%B6%E8%A6%81%E8%80%83%E8%99%91%E7%94%A8%E6%9E%84%E5%BB%BA%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è¦è€ƒè™‘ç”¨æ„å»ºå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E7%A7%81%E6%9C%89%E6%9E%84%E9%80%A0%E5%99%A8%E5%92%8C%E6%9E%9A%E4%B8%BE%E5%BC%BA%E5%8C%96-Singleton-%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">ç”¨ç§æœ‰æ„é€ å™¨å’Œæšä¸¾å¼ºåŒ– Singleton ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%A7%81%E6%9C%89%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%BC%BA%E5%8C%96%E4%B8%8D%E5%8F%AF%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%9A%84%E8%83%BD%E5%8A%9B"><span class="toc-number">1.4.</span> <span class="toc-text">é€šè¿‡ç§æœ‰æ„é€ æ–¹æ³•å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E5%88%9B%E9%80%A0%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.5.</span> <span class="toc-text">é¿å…åˆ›é€ ä¸å¿…è¦çš„å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.5.1.</span> <span class="toc-text">1ã€å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E4%BC%98%E4%BA%8E%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">1.5.2.</span> <span class="toc-text">2ã€é™æ€å·¥å‚æ–¹æ³•ä¼˜äºæ„é€ å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7"><span class="toc-number">1.5.3.</span> <span class="toc-text">3ã€é™æ€å±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8C%85%E8%A3%85%E7%B1%BB"><span class="toc-number">1.5.4.</span> <span class="toc-text">4ã€åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E9%99%A4%E8%BF%87%E6%9C%9F%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8"><span class="toc-number">1.6.</span> <span class="toc-text">æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%B8%80%E4%B8%AA%E7%B1%BB%E8%87%AA%E5%B7%B1%E7%AE%A1%E7%90%86%E5%86%85%E5%AD%98%E5%AE%B9%E6%98%93%E5%AF%BC%E8%87%B4%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F"><span class="toc-number">1.6.1.</span> <span class="toc-text">1ã€ä¸€ä¸ªç±»è‡ªå·±ç®¡ç†å†…å­˜å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E7%BC%93%E5%AD%98%E5%AE%B9%E6%98%93%E5%AF%BC%E8%87%B4%E5%86%85%E7%B2%97%E6%B3%84%E6%BC%8F"><span class="toc-number">1.6.2.</span> <span class="toc-text">2ã€ç¼“å­˜å®¹æ˜“å¯¼è‡´å†…ç²—æ³„æ¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ch3-%E5%AF%B9%E4%BA%8E%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E9%80%9A%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">ch3 å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%86%E7%9B%96-equals-%E7%9A%84%E6%97%B6%E5%80%99%E8%AF%B7%E9%81%B5%E5%AE%88%E9%80%9A%E7%94%A8%E7%BA%A6%E5%AE%9A"><span class="toc-number">2.1.</span> <span class="toc-text">è¦†ç›– equals çš„æ—¶å€™è¯·éµå®ˆé€šç”¨çº¦å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E9%9C%80%E8%A6%81%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-number">2.1.1.</span> <span class="toc-text">ä¸éœ€è¦è¦†ç›– equals æ–¹æ³•çš„åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95"><span class="toc-number">2.1.2.</span> <span class="toc-text">å¦‚ä½•è¦†ç›– equals æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%8A%E8%AF%AB"><span class="toc-number">2.1.3.</span> <span class="toc-text">è¦†ç›– equals æ–¹æ³•çš„ä¸€äº›å‘Šè¯«</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%86%E7%9B%96-equals-%E6%96%B9%E6%B3%95%E6%97%B6%E6%80%BB%E6%98%AF%E8%A6%81%E8%A6%86%E7%9B%96-hashCode"><span class="toc-number">2.2.</span> <span class="toc-text">è¦†ç›– equals æ–¹æ³•æ—¶æ€»æ˜¯è¦è¦†ç›– hashCode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A7%8B%E7%BB%88%E8%A6%81%E8%A6%86%E7%9B%96-toString"><span class="toc-number">2.3.</span> <span class="toc-text">å§‹ç»ˆè¦è¦†ç›– toString</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%A8%E6%85%8E%E7%9A%84%E8%A6%86%E7%9B%96-clone"><span class="toc-number">2.4.</span> <span class="toc-text">è°¨æ…çš„è¦†ç›– clone</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%83%E8%99%91%E5%AE%9E%E7%8E%B0-Comparable-%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.5.</span> <span class="toc-text">è€ƒè™‘å®ç° Comparable æ¥å£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ch4-%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.</span> <span class="toc-text">ch4 ç±»å’Œæ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%B1%BB%E5%92%8C%E6%88%90%E5%91%98%E7%9A%84%E5%8F%AF%E8%AE%BF%E9%97%AE%E6%80%A7%E6%9C%80%E5%B0%8F%E5%8C%96"><span class="toc-number">3.1.</span> <span class="toc-text">ä½¿ç±»å’Œæˆå‘˜çš„å¯è®¿é—®æ€§æœ€å°åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%85%AC%E6%9C%89%E7%B1%BB%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%AC%E6%9C%89%E6%96%B9%E6%B3%95%E8%80%8C%E9%9D%9E%E5%85%AC%E6%9C%89%E5%9F%9F"><span class="toc-number">3.2.</span> <span class="toc-text">åœ¨å…¬æœ‰ç±»ä¸­ä½¿ç”¨å…¬æœ‰æ–¹æ³•è€Œéå…¬æœ‰åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E5%8F%AF%E5%8F%98%E5%BD%A2%E6%9C%80%E5%B0%8F"><span class="toc-number">3.3.</span> <span class="toc-text">ä½¿å¯å˜å½¢æœ€å°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E4%BC%98%E4%BA%8E%E7%BB%A7%E6%89%BF"><span class="toc-number">3.4.</span> <span class="toc-text">å¤åˆä¼˜äºç»§æ‰¿</span></a></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&text=effective java"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&is_video=false&description=effective java"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=effective java&body=Check out this article: https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&title=effective java"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&name=effective java&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lozhu.happy365.day/2022/07/26/5a7d26b642c6/&t=effective java"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li> -->
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    <!-- Copyright --> &copy;
    
    
    2018-2024
    lozhu
  </div>
  
    <div>
      <a href="https://icp.gov.moe/?keyword=20249900" target="_blank">èŒICPå¤‡ 20249900 å·</a>
    </div>
  
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/about/">å…³äº</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html">å¼€å¾€ ğŸš‡</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿ï¼\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸï¼");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?8bdf047ae0a66729bd3b27e8bb56fe11";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      </script>

<!-- 51la Analytics -->

  <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
  <script>
  LA.init({
      id: '3I0QIERSX42bDzDc',
      ck: '3I0QIERSX42bDzDc'
  })
  </script>

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'lozhu20/my-blog-comments';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'Comment';
      var utterances_theme = 'github-light';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

<!-- image modal -->
<script>
  (function() {
    var contentNode = document.getElementsByClassName('content e-content');
    if (!contentNode || contentNode.length === 0) {
      console.log('no content, exit');
      return;
    }

    var imgsNodes = contentNode[0].getElementsByTagName('img');
    if (!imgsNodes || imgsNodes.length === 0) {
      console.log('no image, exit');
      return;
    }

    var span = document.getElementById('modal_close_btn');
    span.onclick = function() { 
      modal.style.display = "none";
    };

    var modal = document.getElementById('modal');
    var modalImage = document.getElementById('modal_image');
    var captionText = document.getElementById('caption');

    for (var i = imgsNodes.length - 1; i >= 0; i--) {
      let image = imgsNodes[i];
      image.onclick = function() {
        modal.style.display = "block";
        modalImage.src = this.src;
        captionText.innerHTML = this.alt || "æ–‡ç« é…å›¾";
      };
    }
  }());
</script>

</body>
</html>
