<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="baidu-site-verification" content="codeva-OBV0UPgBod" />
    <meta name="msvalidate.01" content="B9019CE3751A15D63E78AF8679980069" />
    <meta name="description" content="åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ï¼š  ç»§æ‰¿Threadç±»ï¼› å®ç°Runnableæ¥å£ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://lozhu.happy365.day/2020/10/08/00e11830a793/index.html">
<meta property="og:site_name" content="Lozhu&#39;s blog">
<meta property="og:description" content="åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ï¼š  ç»§æ‰¿Threadç±»ï¼› å®ç°Runnableæ¥å£ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-10-08T08:26:13.000Z">
<meta property="article:modified_time" content="2024-12-08T06:50:57.171Z">
<meta property="article:author" content="lozhu">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="å¤šçº¿ç¨‹">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XMGS491MQF"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XMGS491MQF');
  </script>


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Lozhu's blog" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="modal" class="modal">
  <span id="modal_close_btn" class="modal-close-btn">x</span>
  <img id="modal_image" class="modal-image">
  <!-- <div id="caption"></div> -->
</div>

      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="é¡¶éƒ¨" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/about/">å…³äº</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html">å¼€å¾€ ğŸš‡</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="ä¸Šä¸€ç¯‡" href="/2020/10/09/cde85a939b5c/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="ä¸‹ä¸€ç¯‡" href="/2020/09/30/e7b4fbbe1cc4/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="è¿”å›é¡¶éƒ¨" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="åˆ†äº«æ–‡ç« " href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lozhu.happy365.day/2020/10/08/00e11830a793/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&text=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&is_video=false&description=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°&body=Check out this article: https://lozhu.happy365.day/2020/10/08/00e11830a793/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-reddit " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-digg " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&name=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°&description=&lt;p&gt;åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»§æ‰¿Threadç±»ï¼›&lt;/li&gt;
&lt;li&gt;å®ç°Runnableæ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lozhu.happy365.day/2020/10/08/00e11830a793/&t=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li> -->
</ul>

    </div>
    
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">lozhu</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-10-08T08:26:13.000Z" class="dt-published" itemprop="datePublished">2020-10-08</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a>
    </div>


      
    <!-- <div class="article-tag"> -->
    <div class="article-category">
        <i class="fa-solid fa-tag"></i>
        <!-- <a class="p-category" href="/tags/Java/" rel="tag">Java</a>, <a class="p-category" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">å¤šçº¿ç¨‹</a> -->
        <a class="category-link" href="/tags/Java/" rel="tag">Java</a>, <a class="category-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">å¤šçº¿ç¨‹</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç»§æ‰¿Threadç±»ï¼›</li>
<li>å®ç°Runnableæ¥å£ã€‚</li>
</ul>
<span id="more"></span>

<ol>
<li>ç»§æ‰¿Threadç±»ï¼š</li>
</ol>
<pre><code class="java">public class MyThread extends Thread &#123;
    public void run() &#123;
        System.out.println(&quot;My thread.&quot;);
    &#125;

    public static void main(String[] args) &#123;
        MyThread myThread = new MyThread();
        myThread.start();
    &#125;
&#125;
</code></pre>
<ol start="2">
<li>å½“ä¸€ä¸ªç±»å·²ç»ç»§æ‰¿äº†å…¶ä»–ç±»æ—¶ï¼Œå°±åªèƒ½å®ç°Runnableæ¥å£ï¼š</li>
</ol>
<pre><code class="java">public class MyThread extends OtherClass implements Runnable &#123;
    @Override
    public void run() &#123;
        System.out.println(&quot;my thread&quot;);
    &#125;

    public static void main(String[] args) &#123;
        // å…ˆåˆ›å»ºä¸€ä¸ªThreadå®ä¾‹ï¼Œå†ä¼ å…¥è‡ªå·±çš„MyThreadå®ä¾‹
        MyThread myThread = new MyThread();
        new Thread(myThread).start();
    &#125;
&#125;
</code></pre>
<p><em>Threadç±»å®ç°äº†Runnableæ¥å£ã€‚</em></p>
<pre><code class="java">public class Thread implements Runnable &#123;
    private volatile String name;
    private int priority;
    ...
&#125;
</code></pre>
<p>å½“çº¿ç¨‹æœ‰è¿”å›å€¼æ—¶ï¼Œå¿…é¡»å®ç°Callableæ¥å£ï¼Œæ‰§è¡ŒCallableä»»åŠ¡åè¿”å›Futureå¯¹è±¡ï¼Œè°ƒç”¨Futureå¯¹è±¡çš„get()æ–¹æ³•è·å–è¿”å›å€¼ï¼š</p>
<pre><code class="java">public class MyThread2 implements Callable &#123;

    private int i;

    MyThread2(int i) &#123;
        this.i = i;
    &#125;

    @Override
    public Object call() throws Exception &#123;
        return i * i * i;
    &#125;

    public static void main(String[] args) throws ExecutionException, InterruptedException &#123;
        int taskSize = 10;
        ExecutorService pool = Executors.newFixedThreadPool(taskSize);
        List&lt;Future&gt; list = new ArrayList&lt;&gt;();

        for (int i = 0; i &lt; taskSize; i++) &#123;
            Callable callable = new MyThread2(i);
            Future future = pool.submit(callable);
            list.add(future);
        &#125;
        pool.shutdown();

        for (Future future : list) &#123;
            System.out.println(future.get().toString());
        &#125;
    &#125;
&#125;
</code></pre>
<p><strong>new Threadçš„å¼Šç«¯å¦‚ä¸‹ï¼š</strong></p>
<p>a. æ¯æ¬¡new Threadæ–°å»ºå¯¹è±¡æ€§èƒ½å·®ã€‚<br>b. çº¿ç¨‹ç¼ºä¹ç»Ÿä¸€ç®¡ç†ï¼Œå¯èƒ½æ— é™åˆ¶æ–°å»ºçº¿ç¨‹ï¼Œç›¸äº’ä¹‹é—´ç«äº‰ï¼ŒåŠå¯èƒ½å ç”¨è¿‡å¤šç³»ç»Ÿèµ„æºå¯¼è‡´æ­»æœºæˆ–oomã€‚<br>c. ç¼ºä¹æ›´å¤šåŠŸèƒ½ï¼Œå¦‚å®šæ—¶æ‰§è¡Œã€å®šæœŸæ‰§è¡Œã€çº¿ç¨‹ä¸­æ–­ã€‚</p>
<p><strong>ç›¸æ¯”new Threadï¼ŒJavaæä¾›çš„å››ç§çº¿ç¨‹æ± çš„å¥½å¤„åœ¨äºï¼š</strong></p>
<p>a. é‡ç”¨å­˜åœ¨çš„çº¿ç¨‹ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºã€æ¶ˆäº¡çš„å¼€é”€ï¼Œæ€§èƒ½ä½³ã€‚<br>b. å¯æœ‰æ•ˆæ§åˆ¶æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°ï¼Œæé«˜ç³»ç»Ÿèµ„æºçš„ä½¿ç”¨ç‡ï¼ŒåŒæ—¶é¿å…è¿‡å¤šèµ„æºç«äº‰ï¼Œé¿å…å µå¡ã€‚<br>c. æä¾›å®šæ—¶æ‰§è¡Œã€å®šæœŸæ‰§è¡Œã€å•çº¿ç¨‹ã€å¹¶å‘æ•°æ§åˆ¶ç­‰åŠŸèƒ½ã€‚</p>
<p>å‚è§ &gt;&gt; <a target="_blank" rel="noopener" href="https://blog.csdn.net/u011974987/article/details/51027795">Java å››ç§çº¿ç¨‹æ± çš„ç”¨æ³•åˆ†æ</a></p>
<p>Javaæä¾›çš„4ç§çº¿ç¨‹æ± ï¼š</p>
<ul>
<li>newCachedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œ<strong>å¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹</strong>ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚</li>
<li>newFixedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œ<strong>å¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°</strong>ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</li>
<li>newSchuduledThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œ<strong>æ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œ</strong>ã€‚</li>
<li>newSingleThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œ<strong>ä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œ</strong>ã€‚</li>
</ul>
<p>newCachedThreadPool</p>
<pre><code class="java">public class MyThread4 &#123;
    public static void main(String[] args) &#123;
        ExecutorService pool = Executors.newCachedThreadPool();
        for (int i = 0; i &lt; 5; i++) &#123;
            final int index = i;
            try &#123;
                Thread.sleep(i * 500);
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
            pool.execute(() -&gt; System.out.println(Thread.currentThread().getName() + &quot; &quot; + index));
        &#125;
    &#125;
&#125;
</code></pre>
<p>çº¿ç¨‹æ± ä¸ºæ— é™å¤§ï¼Œå½“æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡æ—¶ç¬¬ä¸€ä¸ªä»»åŠ¡å·²ç»å®Œæˆï¼Œä¼šå¤ç”¨æ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡çš„çº¿ç¨‹ï¼Œè€Œä¸ç”¨æ¯æ¬¡æ–°å»ºçº¿ç¨‹ã€‚</p>
<pre><code>pool-1-thread-1 0
pool-1-thread-1 1
pool-1-thread-1 2
pool-1-thread-1 3
pool-1-thread-1 4
pool-1-thread-1 5
pool-1-thread-1 6
pool-1-thread-1 7
pool-1-thread-1 8
pool-1-thread-1 9
</code></pre>
<p>newFixedThreadPool</p>
<pre><code class="java">ExecutorService pool = Executors.newFixedThreadPool(3);
for (int i = 0; i &lt; 10; i++) &#123;
    final int x = i;
    pool.execute(() -&gt; &#123;
        try &#123;
            Thread.sleep(1000);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;
        System.out.println(Thread.currentThread().getName() + &quot;  &quot; + x);
    &#125;);
&#125;
</code></pre>
<p>ä»»åŠ¡æ•°è¶…å‡ºæœ€å¤§çº¿ç¨‹æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šç­‰å¾…ï¼š</p>
<pre><code>pool-1-thread-2  1
pool-1-thread-3  2
pool-1-thread-1  0
pool-1-thread-2  3
pool-1-thread-1  5
pool-1-thread-3  4
pool-1-thread-2  6
pool-1-thread-1  7
pool-1-thread-3  8
pool-1-thread-2  9
</code></pre>
<p>newSchuduledThreadPool</p>
<pre><code class="java">ScheduledExecutorService pool = Executors.newScheduledThreadPool(3);
// å»¶è¿Ÿ 1 ç§’åæ¯ 3 ç§’æ‰§è¡Œä¸€æ¬¡
pool.scheduleAtFixedRate(() -&gt; System.out.println(Thread.currentThread().getName()), 1, 3, TimeUnit.SECONDS);
</code></pre>
<p>newSingleThreadPool</p>
<pre><code class="java">ExecutorService pool = Executors.newSingleThreadExecutor();
for (int i = 0; i &lt; 10; i++) &#123;
    final int index = i;
    pool.execute(() -&gt; System.out.println(Thread.currentThread().getName() + &quot; &quot; + index));
&#125;
</code></pre>
<pre><code>pool-1-thread-1 0
pool-1-thread-1 1
pool-1-thread-1 2
pool-1-thread-1 3
pool-1-thread-1 4
pool-1-thread-1 5
pool-1-thread-1 6
pool-1-thread-1 7
pool-1-thread-1 8
pool-1-thread-1 9
</code></pre>
<p>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p>æ–°å»ºNewï¼šJVMåˆ†é…å†…å­˜ï¼Œå¹¶åˆå§‹åŒ–æˆå‘˜å˜é‡çš„å€¼ï¼›</p>
<p>å°±ç»ªRunnableï¼šåˆ›å»ºæ–¹æ³•è°ƒç”¨æ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼›</p>
<p>è¿è¡Œ Runningï¼šè·å¾—CPUï¼Œæ‰§è¡Œrun()æ–¹æ³•ï¼›</p>
<p>é˜»å¡ Blockedï¼šè®©å‡ºCPUæ—¶é—´ç‰‡ï¼Œåœæ­¢è¿è¡Œï¼›</p>
<p>æ­»äº¡ Deadï¼šæ­£å¸¸ç»“æŸï¼Œå¼‚å¸¸ç»“æŸæˆ–è°ƒç”¨stop()æ–¹æ³•ã€‚</p>
<blockquote>
<p>wait()å’Œsleep()çš„å…³é”®çš„åŒºåˆ«åœ¨äºï¼Œsleep()æ–¹æ³•å±äºThreadç±»ï¼Œwait()æ–¹æ³•å±äºObjectç±»ï¼Œwait()æ˜¯ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„ï¼Œè€Œsleep()æ˜¯ç”¨äºçŸ­æ—¶é—´æš‚åœå½“å‰çº¿ç¨‹ã€‚æ›´åŠ æ˜æ˜¾çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼Œ<strong>å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨wait()æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šé‡Šæ”¾å®ƒé”æŒæœ‰çš„å¯¹è±¡çš„ç®¡ç¨‹å’Œé”ï¼Œä½†æ˜¯è°ƒç”¨sleep()æ–¹æ³•çš„æ—¶å€™ï¼Œä¸ä¼šé‡Šæ”¾ä»–æ‰€æŒæœ‰çš„ç®¡ç¨‹ã€‚</strong></p>
<p>è€Œå½“è°ƒç”¨ wait()æ–¹æ³•çš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šæ”¾å¼ƒå¯¹è±¡é”ï¼Œè¿›å…¥ç­‰å¾…æ­¤å¯¹è±¡çš„ç­‰å¾…é”å®šæ± ï¼Œåªæœ‰é’ˆå¯¹æ­¤å¯¹è±¡è°ƒç”¨ notify()æ–¹æ³•åæœ¬çº¿ç¨‹æ‰è¿›å…¥å¯¹è±¡é”å®šæ± å‡†å¤‡è·å–å¯¹è±¡é”è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚</p>
</blockquote>
<p>ç»ˆæ­¢çº¿ç¨‹çš„3ç§æ–¹å¼ &gt; <a target="_blank" rel="noopener" href="https://blog.csdn.net/Smile_Miracle/article/details/71550548">Javaä¸­å¦‚ä½•ä¼˜é›…æ­£ç¡®çš„ç»ˆæ­¢çº¿ç¨‹</a></p>
<ol>
<li><p>ä½¿ç”¨stop()æ–¹æ³•</p>
<p>thread.stop()è°ƒç”¨ä¹‹åï¼Œåˆ›å»ºå­çº¿ç¨‹çš„çº¿ç¨‹å°±ä¼šæŠ›å‡º ThreadDeatherror çš„é”™è¯¯ï¼Œå¹¶ä¸”ä¼šé‡Šæ”¾å­çº¿ç¨‹æ‰€æŒæœ‰çš„æ‰€æœ‰é”ã€‚ä¸€èˆ¬ä»»ä½•è¿›è¡ŒåŠ é”çš„ä»£ç å—ï¼Œéƒ½æ˜¯ä¸ºäº†ä¿æŠ¤æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¦‚æœåœ¨è°ƒç”¨thread.stop()åå¯¼è‡´äº†è¯¥çº¿ç¨‹æ‰€æŒæœ‰çš„æ‰€æœ‰é”çš„çªç„¶é‡Šæ”¾(ä¸å¯æ§åˆ¶)ï¼Œé‚£ä¹ˆè¢«ä¿æŠ¤æ•°æ®å°±æœ‰å¯èƒ½å‘ˆç°ä¸ä¸€è‡´æ€§ï¼Œå…¶ä»–çº¿ç¨‹åœ¨ä½¿ç”¨è¿™äº›è¢«ç ´åçš„æ•°æ®æ—¶ï¼Œæœ‰å¯èƒ½å¯¼è‡´ä¸€äº›å¾ˆå¥‡æ€ªçš„åº”ç”¨ç¨‹åºé”™è¯¯ã€‚å› æ­¤ï¼Œå¹¶ä¸æ¨èä½¿ç”¨ stop æ–¹æ³•æ¥ç»ˆæ­¢çº¿ç¨‹ã€‚</p>
</li>
<li><p>ä½¿ç”¨volatileæ ‡å¿—ä½ï¼š</p>
<pre><code class="java">public class MyRunnable implements Runnable &#123;

    public volatile boolean flag = true;

    @Override
    public void run() &#123;
        System.out.println(Thread.currentThread().getName() + &quot;åˆ›å»º&quot;);
        try &#123;
            Thread.sleep(1000L);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;
        while (flag) &#123;

        &#125;
        System.out.println(Thread.currentThread().getName() + &quot;ç»ˆæ­¢&quot;);
    &#125;

    public static void main(String[] args) throws InterruptedException &#123;
        MyRunnable myRunnable = new MyRunnable();
        for (int i = 0; i &lt; 3; i++) &#123;
            Thread thread = new Thread(myRunnable, i + &quot; &quot;);
            thread.start();
        &#125;
        Thread.sleep(2000L);
        System.out.println(&quot;-------&quot;);
        myRunnable.flag = false;
    &#125;
&#125;
</code></pre>
<p>output</p>
<pre><code>0 åˆ›å»º
2 åˆ›å»º
1 åˆ›å»º
-------
2 ç»ˆæ­¢
0 ç»ˆæ­¢
1 ç»ˆæ­¢
</code></pre>
</li>
<li><p>ä½¿ç”¨interruptæ–¹å¼</p>
<ol>
<li><p>çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€æ—¶ï¼š</p>
<p>å¦‚ä½¿ç”¨äº† sleep,åŒæ­¥é”çš„ wait,socket ä¸­çš„ receiver,accept ç­‰æ–¹æ³•æ—¶ï¼Œä¼šä½¿çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ã€‚å½“è°ƒç”¨çº¿ç¨‹çš„ interrupt()æ–¹æ³•æ—¶ï¼Œä¼šæŠ›å‡º InterruptException å¼‚å¸¸ã€‚é˜»å¡ä¸­çš„é‚£ä¸ªæ–¹æ³•æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œé€šè¿‡ä»£ç æ•è·è¯¥å¼‚å¸¸ï¼Œç„¶å break è·³å‡ºå¾ªç¯çŠ¶æ€ï¼Œä»è€Œè®©æˆ‘ä»¬æœ‰æœºä¼šç»“æŸè¿™ä¸ªçº¿ç¨‹çš„æ‰§è¡Œã€‚é€šå¸¸å¾ˆå¤šäººè®¤ä¸ºåªè¦è°ƒç”¨ interrupt æ–¹æ³•çº¿ç¨‹å°±ä¼šç»“æŸï¼Œå®é™…ä¸Šæ˜¯é”™çš„ï¼Œ ä¸€å®šè¦å…ˆæ•è· InterruptedException å¼‚å¸¸ä¹‹åé€šè¿‡break æ¥è·³å‡ºå¾ªç¯ï¼Œæ‰èƒ½æ­£å¸¸ç»“æŸ run æ–¹æ³•ã€‚</p>
<pre><code class="java">public class MyThread5 extends Thread &#123;

    @Override
    public void run() &#123;
        try &#123;
            Thread.sleep(3000L);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;

    public static void main(String[] args) &#123;
        MyThread5 thread5 = new MyThread5();
        thread5.start();
        boolean interrupted = thread5.isInterrupted();
        if (!interrupted) &#123;
            thread5.interrupt();
        &#125;
    &#125;
&#125;

output
java.lang.InterruptedException: sleep interrupted
    at java.base/java.lang.Thread.sleep(Native Method)
    at ch4.MyThread5.run(MyThread5.java:12)
</code></pre>
</li>
<li><p>çº¿ç¨‹æœªå¤„äºé˜»å¡çŠ¶æ€ï¼š</p>
<p>ä½¿ç”¨ isInterrupted()åˆ¤æ–­çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—æ¥é€€å‡ºå¾ªç¯ã€‚å½“ä½¿ç”¨<br>interrupt()æ–¹æ³•æ—¶ï¼Œä¸­æ–­æ ‡å¿—å°±ä¼šç½® trueï¼Œå’Œä½¿ç”¨è‡ªå®šä¹‰çš„æ ‡å¿—æ¥æ§åˆ¶å¾ªç¯æ˜¯ä¸€æ ·çš„é“ç†ã€‚</p>
<pre><code class="java">public class MyThread5 extends Thread &#123;
    public void run() &#123;
        super.run();

        try &#123;
            System.out.println(&quot;çº¿ç¨‹å¼€å§‹ã€‚ã€‚ã€‚&quot;);
            Thread.sleep(200000);
            System.out.println(&quot;çº¿ç¨‹ç»“æŸã€‚&quot;);
        &#125; catch (InterruptedException e) &#123;
            System.out.println(&quot;åœ¨æ²‰ç¡ä¸­è¢«åœæ­¢, è¿›å…¥catchï¼Œ è°ƒç”¨isInterrupted()æ–¹æ³•çš„ç»“æœæ˜¯ï¼š&quot; + this.isInterrupted());
            e.printStackTrace();
        &#125;
    &#125;

    public static void main(String[] args) &#123;
        MyThread5 thread5 = new MyThread5();
        thread5.start();
        thread5.interrupt();
    &#125;
&#125;

output
çº¿ç¨‹å¼€å§‹ã€‚ã€‚ã€‚
åœ¨æ²‰ç¡ä¸­è¢«åœæ­¢, è¿›å…¥catchï¼Œ è°ƒç”¨isInterrupted()æ–¹æ³•çš„ç»“æœæ˜¯ï¼šfalse
java.lang.InterruptedException: sleep interrupted
    at java.base/java.lang.Thread.sleep(Native Method)
    at ch4.MyThread5.run(MyThread5.java:13)
</code></pre>
</li>
</ol>
</li>
</ol>
<p>çº¿ç¨‹åŸºæœ¬æ–¹æ³•ï¼š</p>
<p>yieldï¼šçº¿ç¨‹çš„ç¤¼è®©æŒ‡çš„æ˜¯å…ˆå°†çº¿ç¨‹çš„èµ„æºè®©å‡ºå»ï¼Œè®©åˆ«çš„çº¿ç¨‹å…ˆæ‰§è¡Œã€‚</p>
<pre><code class="java">public class ThreadMethod extends Thread &#123;
    public static void main(String[] args) &#123;
        Thread thread = new Thread(() -&gt; &#123;
            for (int x = 0; x &lt; 10; x++) &#123;
                if (x % 3 == 0) &#123;
                    Thread.yield(); //çº¿ç¨‹ç¤¼è®©
                    System.out.println(&quot;ç©è€çº¿ç¨‹ç¤¼è®©æ‰§è¡Œ ***********************&quot;);
                &#125;
                System.out.println(Thread.currentThread().getName() + &quot;ã€ x = &quot; + x);
            &#125;
        &#125;, &quot;ç©è€çš„çº¿ç¨‹&quot;);
        thread.start();
        for (int x = 0; x &lt; 10; x++) &#123;
            System.out.println(&quot;ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = &quot; + x);
        &#125;
    &#125;
&#125;
</code></pre>
<p>output</p>
<pre><code>ç©è€çº¿ç¨‹ç¤¼è®©æ‰§è¡Œ ***********************
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 0
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 1
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 2
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 3
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 4
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 5
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 6
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 7
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 8
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 9
ç©è€çš„çº¿ç¨‹ã€ x = 0
ç©è€çš„çº¿ç¨‹ã€ x = 1
ç©è€çš„çº¿ç¨‹ã€ x = 2
ç©è€çº¿ç¨‹ç¤¼è®©æ‰§è¡Œ ***********************
ç©è€çš„çº¿ç¨‹ã€ x = 3
ç©è€çš„çº¿ç¨‹ã€ x = 4
ç©è€çš„çº¿ç¨‹ã€ x = 5
ç©è€çº¿ç¨‹ç¤¼è®©æ‰§è¡Œ ***********************
ç©è€çš„çº¿ç¨‹ã€ x = 6
ç©è€çš„çº¿ç¨‹ã€ x = 7
ç©è€çš„çº¿ç¨‹ã€ x = 8
ç©è€çº¿ç¨‹ç¤¼è®©æ‰§è¡Œ ***********************
ç©è€çš„çº¿ç¨‹ã€ x = 9
</code></pre>
<p>join: çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œï¼ŒæŒ‡çš„å½“æ»¡è¶³æŸäº›æ¡ä»¶ä¹‹åï¼ŒæŸä¸€ä¸ªçº¿ç¨‹å¯¹è±¡å°†ä¸€ç›´å¯ä»¥ç‹¬å èµ„æºï¼Œä¸€ç›´åˆ°è¯¥çº¿ç¨‹çš„ç¨‹åºæ‰§è¡Œç»“æŸã€‚</p>
<pre><code class="java">public class ThreadMethod extends Thread &#123;
    public static void main(String[] args) throws InterruptedException &#123;
        Thread mainThread = Thread.currentThread(); //è·å¾—ä¸»çº¿ç¨‹
        Thread thread = new Thread(() -&gt; &#123;
            for (int x = 0; x &lt; 10; x++) &#123;
                if (x == 3) &#123;  //å¦‚æœx == 3ï¼Œå°±å¼ºåˆ¶æ‰§è¡Œä¸»çº¿ç¨‹
                    try &#123;
                        mainThread.join();
                    &#125; catch (InterruptedException e) &#123;
                        e.printStackTrace();
                    &#125;
                &#125;
                System.out.println(Thread.currentThread().getName() + &quot;ã€ x = &quot; + x);
            &#125;
        &#125;, &quot;ç©è€çš„çº¿ç¨‹&quot;);
        thread.start();
        for (int x = 0; x &lt; 10; x++) &#123;
            Thread.sleep(100L);
            System.out.println(&quot;ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = &quot; + x);
        &#125;
    &#125;
&#125;
</code></pre>
<p>output</p>
<pre><code>ç©è€çš„çº¿ç¨‹ã€ x = 0
ç©è€çš„çº¿ç¨‹ã€ x = 1
ç©è€çš„çº¿ç¨‹ã€ x = 2
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 0
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 1
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 2
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 3
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 4
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 5
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 6
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 7
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 8
ã€éœ¸é“çš„mainä¸»çº¿ç¨‹ã€‘ x = 9
ç©è€çš„çº¿ç¨‹ã€ x = 3
ç©è€çš„çº¿ç¨‹ã€ x = 4
ç©è€çš„çº¿ç¨‹ã€ x = 5
ç©è€çš„çº¿ç¨‹ã€ x = 6
ç©è€çš„çº¿ç¨‹ã€ x = 7
ç©è€çš„çº¿ç¨‹ã€ x = 8
ç©è€çš„çº¿ç¨‹ã€ x = 9
</code></pre>
<p>sleepï¼š ä¼‘çœ çš„ä¸»è¦ç‰¹ç‚¹æ˜¯å¯ä»¥è‡ªåŠ¨å®ç°çº¿ç¨‹çš„å”¤é†’ï¼Œä»¥ç»§ç»­è¿›è¡Œåç»­çš„å¤„ç†ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç°åœ¨æœ‰å¤šä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä¼‘çœ ä¹Ÿæ˜¯æœ‰å¤šä¸ªå…ˆåé¡ºåºçš„ã€‚</p>
<p>waitå’Œnotifyï¼š</p>
<ul>
<li>synchronizedå…³é”®è¯ç”¨äºäº’æ–¥è®¿é—®ã€‚</li>
<li>ä¸ºäº†è®©ä¸€ä¸ªæ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œç®€å•çš„æ·»åŠ synchronizedå…³é”®è¯åˆ°å®ƒä»¬çš„å£°æ˜ä¸Šã€‚é‚£ä¹ˆåŒä¸€ä¸ªå¯¹è±¡ä¸Šæ²¡æœ‰ä¸¤ä¸ªåŒæ­¥æ–¹æ³•çš„è°ƒç”¨å¯ä»¥ç›¸äº’äº¤é”™ã€‚</li>
<li>åŒæ­¥è¯­å¥å¿…é¡»æŒ‡å®šæä¾›å†…åœ¨é”çš„å¯¹è±¡ã€‚å½“ä½¿ç”¨synchronized(this)æ—¶å€™ï¼Œå¿…é¡»é¿å…ä½¿ç”¨åŒæ­¥å…¶ä»–å¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ã€‚</li>
<li>wait()å‘Šè¯‰è°ƒç”¨çš„çº¿ç¨‹æ”¾å¼ƒç›‘è§†å™¨å’Œè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹è¿›å…¥ç›¸åŒçš„ç›‘è§†å™¨å’Œè°ƒç”¨notify()ã€‚</li>
<li>notify()å”¤é†’åœ¨ç›¸åŒå¯¹è±¡ä¸Šç¬¬ä¸€ä¸ªè°ƒç”¨wait()çš„çº¿ç¨‹ã€‚</li>
</ul>
<pre><code class="java">public class ThreadA &#123;
    public static void main(String[] args) &#123;
        ThreadB b = new ThreadB();
        b.start();

        synchronized (b) &#123;
            try &#123;
                System.out.println(&quot;Waiting for b to complete...&quot;);
                b.wait();
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;

            System.out.println(&quot;Total is: &quot; + b.total);
        &#125;
    &#125;
&#125;

class ThreadB extends Thread &#123;
    int total;

    @Override
    public void run() &#123;
        synchronized (this) &#123;
            for (int i = 0; i &lt; 100; i++) &#123;
                total += i;
            &#125;
            notify();
        &#125;
    &#125;
&#125;
</code></pre>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>åŠ è½½è¯„è®ºéœ€è¦åœ¨æµè§ˆå™¨å¯ç”¨ JavaScript è„šæœ¬æ”¯æŒã€‚</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">é¦–é¡µ</a></li>
        
          <li><a href="/archives/">å½’æ¡£</a></li>
        
          <li><a href="/friends/">å‹é“¾</a></li>
        
          <li><a href="/about/">å…³äº</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html">å¼€å¾€ ğŸš‡</a></li>
        
      </ul>
    </div>

    
    

    <div id="share-footer" style="display: none">
      <ul>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lozhu.happy365.day/2020/10/08/00e11830a793/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&text=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&is_video=false&description=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°&body=Check out this article: https://lozhu.happy365.day/2020/10/08/00e11830a793/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&title=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lozhu.happy365.day/2020/10/08/00e11830a793/&name=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°&description=&lt;p&gt;åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»§æ‰¿Threadç±»ï¼›&lt;/li&gt;
&lt;li&gt;å®ç°Runnableæ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lozhu.happy365.day/2020/10/08/00e11830a793/&t=Javaå¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li> -->
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    <!-- Copyright --> &copy;
    
    
    2018-2024
    lozhu
  </div>
  
    <div>
      <a href="https://icp.gov.moe/?keyword=20249900" target="_blank">èŒICPå¤‡ 20249900 å·</a>
    </div>
  
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/about/">å…³äº</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html">å¼€å¾€ ğŸš‡</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿ï¼\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸï¼");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?8bdf047ae0a66729bd3b27e8bb56fe11";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      </script>

<!-- 51la Analytics -->

  <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
  <script>
  LA.init({
      id: '3I0QIERSX42bDzDc',
      ck: '3I0QIERSX42bDzDc'
  })
  </script>

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'lozhu20/my-blog-comments';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'Comment';
      var utterances_theme = 'github-light';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

<!-- image modal -->
<script>
  (function() {
    var contentNode = document.getElementsByClassName('content e-content');
    if (!contentNode || contentNode.length === 0) {
      console.log('no content, exit');
      return;
    }

    var imgsNodes = contentNode[0].getElementsByTagName('img');
    if (!imgsNodes || imgsNodes.length === 0) {
      console.log('no image, exit');
      return;
    }

    var span = document.getElementById('modal_close_btn');
    span.onclick = function() { 
      modal.style.display = "none";
    };

    var modal = document.getElementById('modal');
    var modalImage = document.getElementById('modal_image');
    var captionText = document.getElementById('caption');

    for (var i = imgsNodes.length - 1; i >= 0; i--) {
      let image = imgsNodes[i];
      image.onclick = function() {
        modal.style.display = "block";
        modalImage.src = this.src;
        captionText.innerHTML = this.alt || "æ–‡ç« é…å›¾";
      };
    }
  }());
</script>

</body>
</html>
